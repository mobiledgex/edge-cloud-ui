{"ast":null,"code":"import _classCallCheck from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/components/number/interpolNumber.js\";\nimport React from 'react';\nimport * as d3 from 'd3';\nimport moment from 'moment';\nimport _ from 'lodash'; // https://bl.ocks.org/mbostock/7004f92cac972edef365\n\nvar _self = null;\n\nvar InterpolNumber =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(InterpolNumber, _React$Component);\n\n  function InterpolNumber() {\n    var _this;\n\n    _classCallCheck(this, InterpolNumber);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InterpolNumber).call(this));\n\n    _this.getValue = function () {\n      return _this.props.value ? _this.props.value : 0;\n    };\n\n    _self = _assertThisInitialized(_this);\n    _this.state = {};\n    _this.randomRange = 1000;\n    _this.timeout = setTimeout(function () {\n      return _this.randomRange = 1000;\n    }, 1500);\n    return _this;\n  }\n\n  _createClass(InterpolNumber, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.timeout);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var format = d3.format(this.props.format ? this.props.format : \",d\");\n      var self = this;\n      d3.select('#' + this.props.sId).transition().duration(1000).on(\"start\", function repeat() {\n        d3.active(this).tween(\"text\", function () {\n          var that = d3.select(this),\n              i = d3.interpolateNumber(that.text().replace(/,/g, \"\"), self.getValue());\n          return function (t) {\n            that.text(format(i(t)));\n          };\n        }).transition().delay(self.props.value ? 0 : 5000).on(\"start\", repeat);\n      });\n    } //getValue = () => ((this.props.value) ? this.props.value : Math.random() * this.randomRange)\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          sId = _this$props.sId,\n          value = _this$props.value;\n      return React.createElement(\"div\", {\n        className: this.props.className,\n        id: sId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return InterpolNumber;\n}(React.Component);\n\nexport { InterpolNumber as default };\nInterpolNumber.defaultProps = {\n  sId: String(Math.random() * 1000000),\n  w: 200,\n  h: 80\n};","map":{"version":3,"sources":["/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/components/number/interpolNumber.js"],"names":["React","d3","moment","_","_self","InterpolNumber","getValue","props","value","state","randomRange","timeout","setTimeout","clearTimeout","format","self","select","sId","transition","duration","on","repeat","active","tween","that","i","interpolateNumber","text","replace","t","delay","className","Component","defaultProps","String","Math","random","w","h"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,CAAP,MAAc,QAAd,C,CAGA;;AAEA,IAAIC,KAAK,GAAG,IAAZ;;IACqBC,c;;;;;AACjB,4BAAc;AAAA;;AAAA;;AACV;;AADU,UA0CdC,QA1Cc,GA0CH;AAAA,aAAQ,MAAKC,KAAL,CAAWC,KAAZ,GAAqB,MAAKD,KAAL,CAAWC,KAAhC,GAAwC,CAA/C;AAAA,KA1CG;;AAEVJ,IAAAA,KAAK,gCAAL;AACA,UAAKK,KAAL,GAAa,EAAb;AAGA,UAAKC,WAAL,GAAmB,IAAnB;AACA,UAAKC,OAAL,GAAeC,UAAU,CAAC;AAAA,aAAM,MAAKF,WAAL,GAAmB,IAAzB;AAAA,KAAD,EAAgC,IAAhC,CAAzB;AAPU;AAQb;;;;2CACsB;AACnBG,MAAAA,YAAY,CAAC,KAAKF,OAAN,CAAZ;AACH;;;wCAEmB;AAEhB,UAAIG,MAAM,GAAGb,EAAE,CAACa,MAAH,CAAW,KAAKP,KAAL,CAAWO,MAAZ,GAAqB,KAAKP,KAAL,CAAWO,MAAhC,GAAuC,IAAjD,CAAb;AACA,UAAIC,IAAI,GAAG,IAAX;AAGId,MAAAA,EAAE,CAACe,MAAH,CAAU,MAAI,KAAKT,KAAL,CAAWU,GAAzB,EACKC,UADL,GAEKC,QAFL,CAEc,IAFd,EAGKC,EAHL,CAGQ,OAHR,EAGiB,SAASC,MAAT,GAAkB;AAC3BpB,QAAAA,EAAE,CAACqB,MAAH,CAAU,IAAV,EACKC,KADL,CACW,MADX,EACmB,YAAW;AACtB,cAAIC,IAAI,GAAGvB,EAAE,CAACe,MAAH,CAAU,IAAV,CAAX;AAAA,cACIS,CAAC,GAAGxB,EAAE,CAACyB,iBAAH,CAAqBF,IAAI,CAACG,IAAL,GAAYC,OAAZ,CAAoB,IAApB,EAA0B,EAA1B,CAArB,EAAoDb,IAAI,CAACT,QAAL,EAApD,CADR;AAEA,iBAAO,UAASuB,CAAT,EAAY;AAAEL,YAAAA,IAAI,CAACG,IAAL,CAAUb,MAAM,CAACW,CAAC,CAACI,CAAD,CAAF,CAAhB;AAA0B,WAA/C;AACH,SALL,EAMKX,UANL,GAOKY,KAPL,CAOYf,IAAI,CAACR,KAAL,CAAWC,KAAZ,GAAmB,CAAnB,GAAqB,IAPhC,EAQKY,EARL,CAQQ,OARR,EAQiBC,MARjB;AASH,OAbL;AAmBP,K,CAGD;;;;6BAGS;AAAA,wBACgB,KAAKd,KADrB;AAAA,UACCU,GADD,eACCA,GADD;AAAA,UACMT,KADN,eACMA,KADN;AAEL,aACI;AAAK,QAAA,SAAS,EAAE,KAAKD,KAAL,CAAWwB,SAA3B;AAAsC,QAAA,EAAE,EAAEd,GAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAIH;;;;EAnDuCjB,KAAK,CAACgC,S;;SAA7B3B,c;AAqDrBA,cAAc,CAAC4B,YAAf,GAA8B;AAC1BhB,EAAAA,GAAG,EAAEiB,MAAM,CAACC,IAAI,CAACC,MAAL,KAAc,OAAf,CADe;AAE1BC,EAAAA,CAAC,EAAC,GAFwB;AAG1BC,EAAAA,CAAC,EAAC;AAHwB,CAA9B","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport moment from 'moment';\nimport _ from 'lodash';\n\n\n// https://bl.ocks.org/mbostock/7004f92cac972edef365\n\nlet _self = null;\nexport default class InterpolNumber extends React.Component {\n    constructor() {\n        super();\n        _self = this;\n        this.state = {\n\n        }\n        this.randomRange = 1000;\n        this.timeout = setTimeout(() => this.randomRange = 1000, 1500)\n    }\n    componentWillUnmount() {\n        clearTimeout(this.timeout);\n    }\n\n    componentDidMount() {\n\n        var format = d3.format((this.props.format)? this.props.format:\",d\");\n        var self = this;\n\n\n            d3.select('#'+this.props.sId)\n                .transition()\n                .duration(1000)\n                .on(\"start\", function repeat() {\n                    d3.active(this)\n                        .tween(\"text\", function() {\n                            var that = d3.select(this),\n                                i = d3.interpolateNumber(that.text().replace(/,/g, \"\"), self.getValue());\n                            return function(t) { that.text(format(i(t))); };\n                        })\n                        .transition()\n                        .delay((self.props.value)?0:5000)\n                        .on(\"start\", repeat);\n                });\n\n\n\n\n\n    }\n\n\n    //getValue = () => ((this.props.value) ? this.props.value : Math.random() * this.randomRange)\n    getValue = () => ((this.props.value) ? this.props.value : 0)\n\n    render() {\n        let { sId, value } = this.props;\n        return (\n            <div className={this.props.className} id={sId}/>\n\n        )\n    }\n}\nInterpolNumber.defaultProps = {\n    sId: String(Math.random()*1000000),\n    w:200,\n    h:80\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kyungjoon/react_pjt/edge-cloud-ui/src/charts/bubbleGroup.js\";\nimport React from 'react';\nimport * as d3 from 'd3'; //redux\n\nimport { connect } from 'react-redux';\nimport './styles.css';\nvar data = {\n  \"name\": \"A1\",\n  \"children\": [{\n    \"name\": \"B1\",\n    \"children\": [{\n      \"name\": \"Master\",\n      \"value\": 400\n    }, {\n      \"name\": \"Node\",\n      \"value\": 200\n    }, {\n      \"name\": \"Node\",\n      \"value\": 200\n    }, {\n      \"name\": \"Node\",\n      \"value\": 200\n    }, {\n      \"name\": \"Node\",\n      \"value\": 200\n    }]\n  }]\n};\n\nvar BubbleGroup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BubbleGroup, _React$Component);\n\n  function BubbleGroup() {\n    _classCallCheck(this, BubbleGroup);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(BubbleGroup).apply(this, arguments));\n  }\n\n  _createClass(BubbleGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.makeNode();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      this.clearNode();\n      this.makeNode();\n    }\n  }, {\n    key: \"makeNode\",\n    value: function makeNode() {\n      var getChild = function getChild(value, idx) {\n        return {\n          \"name\": value,\n          \"value\": idx === 0 ? 200 : 200,\n          \"color\": idx === 0 ? \"#ff7d77\" : \"#a2cbff\"\n        };\n      };\n\n      var formValues = this.props.formValues;\n\n      if (formValues && formValues.NumberOfNode) {\n        var tempArray = [];\n        console.log('20191204.. vparseInt(formValues.NumberOfNode)  ', parseInt(formValues.NumberOfNode));\n\n        for (var i = 0; i < parseInt(formValues.NumberOfNode) + 1; i++) {\n          tempArray.push(i);\n        }\n\n        data = {\n          \"name\": 'NO Name',\n          \"children\": [{\n            \"name\": \"Master\",\n            \"children\": tempArray.length ? tempArray.map(function (node, i) {\n              return getChild(formValues.ClusterName, i);\n            }) : ''\n          }]\n        };\n      }\n\n      var packLayout = d3.pack().size([300, 300]);\n      var rootNode = d3.hierarchy(data);\n      rootNode.sum(function (d) {\n        return d.value;\n      });\n      packLayout(rootNode);\n      var nodes = d3.select('svg g').selectAll('g').data(rootNode.descendants()).enter().append('g').attr('transform', function (d) {\n        return 'translate(' + [d.x, d.y] + ')';\n      });\n      nodes.append('circle').attr('r', function (d) {\n        return d.r;\n      }).style('fill', function (d) {\n        return d.data.color;\n      }).style('opacity', 0.6);\n      nodes.append('text').attr('dy', 4).text(function (d) {\n        return d.children === undefined ? d.data.name : '';\n      });\n    }\n  }, {\n    key: \"clearNode\",\n    value: function clearNode() {\n      var nodes = d3.select('svg g').selectAll('g').remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"svg\", {\n        className: \"chart-circle\",\n        width: \"300\",\n        height: \"300\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"text\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, this.props.data ? this.props.data.name : ''), React.createElement(\"g\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return BubbleGroup;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  var formValues = null;\n\n  if (state.form.createAppFormDefault) {\n    formValues = state.form.createAppFormDefault.values;\n    if (formValues) console.log('20191204 formValues---', formValues);\n  }\n\n  return {\n    formValues: formValues\n  };\n};\n\nexport default connect(mapStateToProps, null)(BubbleGroup);","map":{"version":3,"sources":["/Users/kyungjoon/react_pjt/edge-cloud-ui/src/charts/bubbleGroup.js"],"names":["React","d3","connect","data","BubbleGroup","makeNode","nextProps","nextContext","clearNode","getChild","value","idx","formValues","props","NumberOfNode","tempArray","console","log","parseInt","i","push","length","map","node","ClusterName","packLayout","pack","size","rootNode","hierarchy","sum","d","nodes","select","selectAll","descendants","enter","append","attr","x","y","r","style","color","text","children","undefined","name","remove","Component","mapStateToProps","state","ownProps","form","createAppFormDefault","values"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\n//redux\nimport { connect } from 'react-redux';\n\nimport './styles.css';\n\nvar data = {\n    \"name\": \"A1\",\n    \"children\": [\n        {\n            \"name\": \"B1\",\n            \"children\": [\n                {\n                    \"name\": \"Master\",\n                    \"value\": 400\n                },\n                {\n                    \"name\": \"Node\",\n                    \"value\": 200\n                },\n                {\n                    \"name\": \"Node\",\n                    \"value\": 200\n                },\n                {\n                    \"name\": \"Node\",\n                    \"value\": 200\n                },\n                {\n                    \"name\": \"Node\",\n                    \"value\": 200\n                }\n            ]\n        }\n    ]\n};\n\nclass BubbleGroup extends React.Component {\n\n\n    componentDidMount() {\n        this.makeNode();\n    }\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.clearNode();\n        this.makeNode();\n    }\n    makeNode() {\n        const getChild = (value, idx) => (\n            {\n                \"name\": value,\n                \"value\": idx === 0 ? 200 : 200,\n                \"color\": idx === 0 ? \"#ff7d77\" : \"#a2cbff\"\n            }\n        )\n        let formValues = this.props.formValues;\n        if(formValues && formValues.NumberOfNode) {\n            let tempArray = []\n            console.log('20191204.. vparseInt(formValues.NumberOfNode)  ', parseInt(formValues.NumberOfNode))\n            for(let i = 0; i < parseInt(formValues.NumberOfNode)+1; i++){\n                tempArray.push(i)\n            }\n            data = {\n                \"name\": 'NO Name',\n                \"children\": [\n                    {\n                        \"name\": \"Master\",\n                        \"children\": tempArray.length ? tempArray.map((node, i) => getChild(formValues.ClusterName,i)) : ''\n                    }\n                ]\n            };\n        }\n        var packLayout = d3.pack()\n            .size([300, 300]);\n\n        var rootNode = d3.hierarchy(data)\n\n        rootNode.sum(function(d) {\n            return d.value;\n        });\n\n        packLayout(rootNode);\n\n        var nodes = d3.select('svg g')\n            .selectAll('g')\n            .data(rootNode.descendants())\n            .enter()\n            .append('g')\n            .attr('transform', function(d) {return 'translate(' + [d.x, d.y] + ')'})\n\n        nodes\n            .append('circle')\n            .attr('r', function(d) { return d.r; })\n            .style('fill', function(d) { return d.data.color; })\n            .style('opacity', 0.6)\n\n        nodes\n            .append('text')\n            .attr('dy', 4)\n            .text(function(d) {\n                return d.children === undefined ? d.data.name : '';\n            })\n    }\n    clearNode() {\n        var nodes = d3.select('svg g')\n            .selectAll('g')\n            .remove()\n\n\n    }\n    render() {\n        return (\n            <svg className=\"chart-circle\" width=\"300\" height=\"300\">\n                <text>{this.props.data ? this.props.data.name : ''}</text>\n                <g></g>\n            </svg>\n        )\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    let formValues = null;\n    if(state.form.createAppFormDefault) {\n        formValues = state.form.createAppFormDefault.values;\n        if(formValues) console.log('20191204 formValues---', formValues)\n    }\n    return {\n        formValues: formValues\n    };\n};\n\nexport default connect(mapStateToProps, null)(BubbleGroup);\n"]},"metadata":{},"sourceType":"module"}
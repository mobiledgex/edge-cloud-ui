{"ast":null,"code":"import _classCallCheck from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/sites/siteFour_page_createOrga.js\";\nimport React from 'react';\nimport { Grid, Image, Header, Menu, Dropdown, Button } from 'semantic-ui-react';\nimport sizeMe from 'react-sizeme';\nimport { withRouter } from 'react-router-dom';\nimport MaterialIcon from 'material-icons-react'; //redux\n\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\nimport SiteFourOrgaStepView from '../container/siteFourOrgaStepView';\nimport './siteThree.css';\nimport Alert from \"react-s-alert\";\nimport * as services from '../services/service_compute_service';\nimport * as serviceOrganiz from \"../services/service_organiz_api\";\nvar devOptions = [{\n  key: 'af',\n  value: 'af',\n  text: 'SK Telecom'\n}];\nvar _self = null;\n\nvar SiteFourPageCreateorga =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SiteFourPageCreateorga, _React$Component);\n\n  function SiteFourPageCreateorga(props) {\n    var _this;\n\n    _classCallCheck(this, SiteFourPageCreateorga);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SiteFourPageCreateorga).call(this, props));\n\n    _this.handleItemClick = function (e, _ref) {\n      var name = _ref.name;\n      return _this.setState({\n        activeItem: name\n      });\n    };\n\n    _this.resultCreateOrg = function (result, resource, self, body) {\n      _this.setState({\n        toggleSubmit: false\n      });\n\n      _self.props.handleLoadingSpinner(false);\n\n      if (result.data.error) {\n        _this.props.handleAlertInfo('error', String(result.data.error));\n      } else {\n        _this.props.handleAlertInfo('success', 'Your organization ' + body.name + ' created successfully'); //goto next step\n\n\n        _this.props.handleChangeStep('02');\n\n        _this.setState({\n          step: 2\n        });\n      }\n    };\n\n    _this.resultGiveToRole = function (result, resource, self, body) {\n      _this.setState({\n        toggleSubmitTwo: false\n      });\n\n      _self.props.handleLoadingSpinner(false);\n\n      if (result.data.error) {\n        _this.props.handleAlertInfo('error', String(result.data.error));\n      } else {\n        _this.props.handleAlertInfo('success', 'User ' + body.username + ' added to organization ' + body.org + ' successfully'); //goto next step\n        //this.setState({step:3})\n\n      }\n    };\n\n    _self = _assertThisInitialized(_this);\n    _this.state = {\n      shouldShowBox: true,\n      shouldShowCircle: false,\n      contHeight: 0,\n      contWidth: 0,\n      bodyHeight: 0,\n      activeItem: 'Developers',\n      devData: [],\n      step: 1,\n      toggleSubmit: false,\n      toggleSubmitTwo: false\n    };\n    _this.headerH = 70;\n    _this.hgap = 0;\n    _this.headerLayout = [3, 3, 3, 3, 4]; //this.hideHeader = ['Address','Phone']\n\n    return _this;\n  }\n\n  _createClass(SiteFourPageCreateorga, [{\n    key: \"gotoUrl\",\n    value: function gotoUrl(site, subPath) {\n      var mainPath = site;\n\n      _self.props.history.push({\n        pathname: site,\n        search: subPath\n      });\n\n      _self.props.history.location.search = subPath;\n\n      _self.props.handleChangeSite({\n        mainPath: mainPath,\n        subPath: subPath\n      });\n    } //go to\n\n  }, {\n    key: \"gotoPreview\",\n    value: function gotoPreview(site) {\n      //브라우져 입력창에 주소 기록\n      var mainPath = site;\n      var subPath = 'pg=0';\n\n      _self.props.history.push({\n        pathname: mainPath,\n        search: subPath,\n        state: {\n          some: 'state'\n        }\n      });\n\n      _self.props.history.location.search = subPath;\n\n      _self.props.handleChangeSite({\n        mainPath: mainPath,\n        subPath: subPath\n      });\n    }\n  }, {\n    key: \"onHandleRegistry\",\n    value: function onHandleRegistry() {\n      this.props.handleInjectDeveloper('userInfo');\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        bodyHeight: window.innerHeight - this.headerH\n      });\n      this.setState({\n        contHeight: (window.innerHeight - this.headerH) / 2 - this.hgap\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null;\n      if (store && store.userToken) this.getDataDeveloper(store.userToken);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setState({\n        bodyHeight: window.innerHeight - this.headerH\n      });\n      this.setState({\n        contHeight: (nextProps.size.height - this.headerH) / 2 - this.hgap\n      });\n\n      if (nextProps.userToken) {\n        this.getDataDeveloper(nextProps.userToken);\n      }\n\n      var store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null;\n\n      if (nextProps.stepOne && nextProps.stepOne.submitSucceeded && !this.state.toggleSubmit) {\n        this.setState({\n          toggleSubmit: true\n        });\n\n        _self.props.handleLoadingSpinner(true);\n\n        serviceOrganiz.organize('createOrg', {\n          name: nextProps.stepOne.values.name,\n          type: nextProps.stepOne.values.type.toLowerCase(),\n          address: nextProps.stepOne.values.address,\n          phone: nextProps.stepOne.values.phone,\n          token: store ? store.userToken : 'null'\n        }, this.resultCreateOrg, this);\n      }\n      /*\n      org=bigorg username=worker1 role=DeveloperContributor\n       */\n\n\n      if (nextProps.stepTwo && nextProps.stepTwo.submitSucceeded && !this.state.toggleSubmitTwo) {\n        this.setState({\n          toggleSubmitTwo: true\n        });\n        this.props.handleLoadingSpinner(true);\n\n        var _username = nextProps.stepTwo.values && nextProps.stepTwo.values.username || '';\n\n        var _org = nextProps.stepTwo.values && nextProps.stepTwo.values.orgName || '';\n\n        var _role = nextProps.stepTwo.values && nextProps.stepTwo.values.orgType + nextProps.stepTwo.values.selectRole || '';\n\n        serviceOrganiz.organize('addUserRole', {\n          username: _username,\n          org: _org,\n          role: _role,\n          token: store ? store.userToken : 'null'\n        }, this.resultGiveToRole, this);\n      }\n    }\n  }, {\n    key: \"receiveResult\",\n    value: function receiveResult(result, resource, self) {\n      // @inki if data has expired token\n      if (result.error && result.error.indexOf('Expired') > -1) {\n        _self.props.handleAlertInfo('error', result.error);\n\n        setTimeout(function () {\n          return _self.gotoUrl('/logout');\n        }, 4000);\n\n        _self.props.handleLoadingSpinner(false);\n\n        return;\n      }\n\n      if (result.error) {} else {\n        _self.setState({\n          devData: result\n        });\n      }\n\n      _self.props.handleLoadingSpinner(false);\n    }\n  }, {\n    key: \"getDataDeveloper\",\n    value: function getDataDeveloper(token) {\n      services.getMCService('showOrg', {\n        token: token\n      }, _self.receiveResult);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          shouldShowBox = _this$state.shouldShowBox,\n          shouldShowCircle = _this$state.shouldShowCircle,\n          step = _this$state.step;\n      var activeItem = this.state.activeItem;\n      return React.createElement(SiteFourOrgaStepView, {\n        devData: this.state.devData,\n        headerLayout: this.headerLayout,\n        hideHeader: this.hideHeader,\n        stepMove: this.state.step,\n        toggleSubmit: this.state.toggleSubmit,\n        toggleSubmitTwo: this.state.toggleSubmitTwo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return SiteFourPageCreateorga;\n}(React.Component);\n\n;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var formStepOne = state.form.orgaStepOne ? {\n    values: state.form.orgaStepOne.values,\n    submitSucceeded: state.form.orgaStepOne.submitSucceeded,\n    submitFailed: state.form.orgaStepOne.submitFailed\n  } : {};\n  var formStepTwo = state.form.orgaStepTwo ? {\n    values: state.form.orgaStepTwo.values,\n    submitSucceeded: state.form.orgaStepTwo.submitSucceeded\n  } : {};\n  return {\n    userToken: state.user.userToken ? state.userToken : null,\n    userInfo: state.user.user,\n    stepOne: formStepOne,\n    stepTwo: formStepTwo\n  };\n};\n\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return {\n    handleChangeSite: function handleChangeSite(data) {\n      dispatch(actions.changeSite(data));\n    },\n    handleChangeStep: function handleChangeStep(data) {\n      dispatch(actions.changeStep(data));\n    },\n    handleInjectData: function handleInjectData(data) {\n      dispatch(actions.injectData(data));\n    },\n    handleInjectDeveloper: function handleInjectDeveloper(data) {\n      dispatch(actions.registDeveloper(data));\n    },\n    handleLoadingSpinner: function handleLoadingSpinner(data) {\n      dispatch(actions.loadingSpinner(data));\n    },\n    handleAlertInfo: function handleAlertInfo(mode, msg) {\n      dispatch(actions.alertInfo(mode, msg));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(sizeMe({\n  monitorHeight: true\n})(SiteFourPageCreateorga)));","map":{"version":3,"sources":["/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/sites/siteFour_page_createOrga.js"],"names":["React","Grid","Image","Header","Menu","Dropdown","Button","sizeMe","withRouter","MaterialIcon","connect","actions","SiteFourOrgaStepView","Alert","services","serviceOrganiz","devOptions","key","value","text","_self","SiteFourPageCreateorga","props","handleItemClick","e","name","setState","activeItem","resultCreateOrg","result","resource","self","body","toggleSubmit","handleLoadingSpinner","data","error","handleAlertInfo","String","handleChangeStep","step","resultGiveToRole","toggleSubmitTwo","username","org","state","shouldShowBox","shouldShowCircle","contHeight","contWidth","bodyHeight","devData","headerH","hgap","headerLayout","site","subPath","mainPath","history","push","pathname","search","location","handleChangeSite","some","handleInjectDeveloper","window","innerHeight","store","localStorage","PROJECT_INIT","JSON","parse","userToken","getDataDeveloper","nextProps","size","height","stepOne","submitSucceeded","organize","values","type","toLowerCase","address","phone","token","stepTwo","_username","_org","orgName","_role","orgType","selectRole","role","indexOf","setTimeout","gotoUrl","getMCService","receiveResult","hideHeader","Component","mapStateToProps","formStepOne","form","orgaStepOne","submitFailed","formStepTwo","orgaStepTwo","user","userInfo","mapDispatchProps","dispatch","changeSite","changeStep","handleInjectData","injectData","registDeveloper","loadingSpinner","mode","msg","alertInfo","monitorHeight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Grid, Image, Header, Menu, Dropdown, Button } from 'semantic-ui-react';\nimport sizeMe from 'react-sizeme';\nimport { withRouter } from 'react-router-dom';\nimport MaterialIcon from 'material-icons-react';\n\n//redux\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\n\nimport SiteFourOrgaStepView from '../container/siteFourOrgaStepView';\nimport './siteThree.css';\nimport Alert from \"react-s-alert\";\nimport * as services from '../services/service_compute_service';\nimport * as serviceOrganiz from \"../services/service_organiz_api\";\n\n\nlet devOptions = [ { key: 'af', value: 'af', text: 'SK Telecom' } ]\n\nlet _self = null;\nclass SiteFourPageCreateorga extends React.Component {\n    constructor(props) {\n        super(props);\n        _self = this;\n        this.state = {\n            shouldShowBox: true,\n            shouldShowCircle: false,\n            contHeight:0,\n            contWidth:0,\n            bodyHeight:0,\n            activeItem: 'Developers',\n            devData:[],\n            step:1,\n            toggleSubmit:false,\n            toggleSubmitTwo:false\n        };\n        this.headerH = 70;\n        this.hgap = 0;\n        this.headerLayout = [3,3,3,3,4]\n        //this.hideHeader = ['Address','Phone']\n    }\n    gotoUrl(site, subPath) {\n        let mainPath = site;\n        _self.props.history.push({\n            pathname: site,\n            search: subPath\n        });\n        _self.props.history.location.search = subPath;\n        _self.props.handleChangeSite({mainPath:mainPath, subPath: subPath})\n\n    }\n    //go to\n    gotoPreview(site) {\n        //브라우져 입력창에 주소 기록\n        let mainPath = site;\n        let subPath = 'pg=0';\n        _self.props.history.push({\n            pathname: mainPath,\n            search: subPath,\n            state: { some: 'state' }\n        });\n        _self.props.history.location.search = subPath;\n        _self.props.handleChangeSite({mainPath:mainPath, subPath: subPath})\n\n    }\n    handleItemClick = (e, { name }) => this.setState({ activeItem: name })\n\n    onHandleRegistry() {\n        this.props.handleInjectDeveloper('userInfo');\n    }\n    componentWillMount() {\n        this.setState({bodyHeight : (window.innerHeight - this.headerH)})\n        this.setState({contHeight:(window.innerHeight-this.headerH)/2 - this.hgap})\n    }\n    componentDidMount() {\n        let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null\n        if(store && store.userToken) this.getDataDeveloper(store.userToken);\n    }\n    componentWillReceiveProps(nextProps) {\n        this.setState({bodyHeight : (window.innerHeight - this.headerH)})\n        this.setState({contHeight:(nextProps.size.height-this.headerH)/2 - this.hgap})\n        if(nextProps.userToken) {\n            this.getDataDeveloper(nextProps.userToken);\n        }\n\n\n        let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null\n\n        if(nextProps.stepOne && nextProps.stepOne.submitSucceeded && !this.state.toggleSubmit) {\n            this.setState({toggleSubmit:true});\n            _self.props.handleLoadingSpinner(true);\n            serviceOrganiz.organize('createOrg',\n                {\n                    name:nextProps.stepOne.values.name,\n                    type:nextProps.stepOne.values.type.toLowerCase(),\n                    address:nextProps.stepOne.values.address,\n                    phone:nextProps.stepOne.values.phone,\n                    token:store ? store.userToken : 'null'\n                }, this.resultCreateOrg, this)\n            \n        }\n        /*\n        org=bigorg username=worker1 role=DeveloperContributor\n         */\n        if(nextProps.stepTwo && nextProps.stepTwo.submitSucceeded && !this.state.toggleSubmitTwo) {\n            this.setState({toggleSubmitTwo:true});\n            this.props.handleLoadingSpinner(true);\n            let _username = nextProps.stepTwo.values && nextProps.stepTwo.values.username || '';\n            let _org = nextProps.stepTwo.values && nextProps.stepTwo.values.orgName || '';\n            let _role = nextProps.stepTwo.values && nextProps.stepTwo.values.orgType+nextProps.stepTwo.values.selectRole || '';\n            serviceOrganiz.organize('addUserRole',\n                {\n                        username:_username,\n                        org:_org,\n                        role:_role,\n                        token:store ? store.userToken : 'null'\n                }, this.resultGiveToRole, this)\n        }\n\n    }\n    resultCreateOrg = (result,resource, self, body) => {\n        this.setState({toggleSubmit:false})\n        _self.props.handleLoadingSpinner(false);\n        if(result.data.error) {\n            this.props.handleAlertInfo('error',String(result.data.error))\n        } else {\n            this.props.handleAlertInfo('success','Your organization '+body.name+' created successfully')\n            //goto next step\n            this.props.handleChangeStep('02')\n            this.setState({step:2})\n        }\n    }\n    resultGiveToRole = (result,resource, self, body) => {\n        this.setState({toggleSubmitTwo:false})\n        _self.props.handleLoadingSpinner(false);\n        if(result.data.error) {\n            this.props.handleAlertInfo('error',String(result.data.error))\n        } else {\n            this.props.handleAlertInfo('success','User '+body.username+' added to organization '+body.org+' successfully')\n            //goto next step\n            //this.setState({step:3})\n        }\n    }\n    receiveResult(result,resource, self) {\n        // @inki if data has expired token\n        if(result.error && result.error.indexOf('Expired') > -1) {\n            _self.props.handleAlertInfo('error', result.error);\n            setTimeout(() => _self.gotoUrl('/logout'), 4000);\n            _self.props.handleLoadingSpinner(false);\n            return;\n        }\n\n        if(result.error) {\n\n        } else {\n            _self.setState({devData:result})\n\n        }\n        _self.props.handleLoadingSpinner(false);\n    }\n    getDataDeveloper(token) {\n        services.getMCService('showOrg',{token:token}, _self.receiveResult)\n    }\n    render() {\n        const {shouldShowBox, shouldShowCircle, step} = this.state;\n        const { activeItem } = this.state\n        return (\n            <SiteFourOrgaStepView devData={this.state.devData} headerLayout={this.headerLayout} hideHeader={this.hideHeader} stepMove={this.state.step} toggleSubmit={this.state.toggleSubmit} toggleSubmitTwo={this.state.toggleSubmitTwo}></SiteFourOrgaStepView>\n        );\n    }\n\n};\n\nconst mapStateToProps = (state) => {\n    let formStepOne= state.form.orgaStepOne\n        ? {\n            values: state.form.orgaStepOne.values,\n            submitSucceeded: state.form.orgaStepOne.submitSucceeded,\n            submitFailed: state.form.orgaStepOne.submitFailed\n        }\n        : {};\n    let formStepTwo= state.form.orgaStepTwo\n        ? {\n            values: state.form.orgaStepTwo.values,\n            submitSucceeded: state.form.orgaStepTwo.submitSucceeded\n        }\n        : {};\n    return {\n        userToken : (state.user.userToken) ? state.userToken: null,\n        userInfo: state.user.user,\n        stepOne:formStepOne, stepTwo:formStepTwo\n    }\n};\nconst mapDispatchProps = (dispatch) => {\n    return {\n        handleChangeSite: (data) => { dispatch(actions.changeSite(data))},\n        handleChangeStep: (data) => { dispatch(actions.changeStep(data))},\n        handleInjectData: (data) => { dispatch(actions.injectData(data))},\n        handleInjectDeveloper: (data) => { dispatch(actions.registDeveloper(data))},\n        handleLoadingSpinner: (data) => { dispatch(actions.loadingSpinner(data))},\n        handleAlertInfo: (mode,msg) => { dispatch(actions.alertInfo(mode,msg))}\n    };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(sizeMe({ monitorHeight: true })(SiteFourPageCreateorga)));\n\n\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kyungjoon/react_pjt/edge-cloud-ui/src/sites/entranceGlob.js\";\nimport React, { Component } from 'react';\nimport { Grid, Button, Container, Input, Label, Popup, Image } from 'semantic-ui-react'; // import React3DGlobe from '../libs/react3dglobe';\n// import { getMockData } from \"../libs/react3dglobe/mockData\";\n\nimport Login from '../components/login'; // API\n\nimport * as MyAPI from '../components/utils/MyAPI';\nimport { LOCAL_STRAGE_KEY } from '../components/utils/Settings';\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\nimport HeaderGlobalMini from '../container/headerGlobalMini';\nimport SiteOne from './siteOne';\nimport * as serviceLogin from \"../services/service_login_api\";\nimport { GridLoader } from \"react-spinners\";\nimport Alert from 'react-s-alert'; // const pointMarkers = getMockData(0x97bcd8, 'point');\n\nvar src1 = 'assets/images/backgroundGlob.png';\nvar self = null;\n\nvar EntranceGlobe =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EntranceGlobe, _Component);\n\n  function EntranceGlobe() {\n    var _this;\n\n    _classCallCheck(this, EntranceGlobe);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EntranceGlobe).call(this));\n\n    _this.logoutRequest = function () {\n      var user = _this.props.user;\n      var param = {\n        login_token: user.userToken\n      };\n      MyAPI.logout(param).then(function (results) {\n        localStorage.removeItem(LOCAL_STRAGE_KEY);\n        self.goToNext(\"/logout\");\n      }).catch(function (err) {\n        localStorage.removeItem(LOCAL_STRAGE_KEY);\n        self.gotoNext(\"/logout\");\n      });\n\n      _this.setState({\n        modalOpen: true\n      });\n    };\n\n    _this.handleMarkerMouseover = function (mouseEvent, hoveredMarker) {\n      _this.setState({\n        hoveredMarker: hoveredMarker,\n        mouseEvent: mouseEvent\n      });\n    };\n\n    _this.handleMarkerMouseout = function (mouseEvent) {\n      _this.setState({\n        hoveredMarker: null,\n        mouseEvent: mouseEvent\n      });\n    };\n\n    _this.handleMarkerClick = function (mouseEvent, clickedMarker) {\n      alert('mouse click == ' + clickedMarker);\n\n      _this.setState({\n        clickedMarker: clickedMarker,\n        mouseEvent: mouseEvent\n      });\n    };\n\n    _this.state = {\n      data: null,\n      intro: true,\n      clickedMarker: null,\n      hoveredMarker: null,\n      mouseEvent: null,\n      loginState: 'out',\n      modalOpen: true,\n      loading: false,\n      signup: false,\n      logined: false\n    };\n    self = _assertThisInitialized(_this);\n    _this.spuserToken = null;\n    return _this;\n  }\n\n  _createClass(EntranceGlobe, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT).userToken : null;\n\n      if (store) {\n        this.setState({\n          modalOpen: false,\n          logined: true\n        });\n      } // && this.props.params.mainPath=='/logout'\n\n\n      if (this.props.params.mainPath === '/passwordreset') {\n        this.setState({\n          modalOpen: true\n        });\n        this.props.handleChangeLoginMode('resetPass');\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      //alert(nextProps.loginMode+\":\"+this.props.loginMode)\n      if (nextProps.loginMode && nextProps.loginMode === 'verify') {\n        this.setState({\n          modalOpen: true,\n          logined: true\n        });\n      } else if (nextProps.loginMode && nextProps.loginMode === 'forgot') {\n        this.setState({\n          modalOpen: true,\n          logined: false\n        });\n      } else if (nextProps.loginMode === 'logout') {\n        this.setState({\n          modalOpen: true,\n          logined: false\n        });\n      } else if (nextProps.loginMode === 'login') {\n        if (nextProps.user.userToken) {\n          this.setState({\n            modalOpen: false,\n            logined: true\n          });\n        }\n      } // if(nextProps.user.login_token !== undefined) {\n      //     this.setState({modalOpen: false})\n      //     self.setState({loading:true})\n      //     Alert.info('Please wait !', {\n      //         position: 'top-right',\n      //         effect: 'bouncyflip',\n      //         timeout: 'none'\n      //     });\n      // } else {\n      //     self.setState({loading:false})\n      //     this.setState({modalOpen: true})\n      //\n      // }\n      //\n      // if(nextProps.user.userToken !== undefined) {\n      //     this.spuserToken = nextProps.user.userToken;\n      //     this.setState({loading:false, modalOpen:false})\n      //     Alert.closeAll();\n      // }\n      //Redux Alert\n\n\n      if (nextProps.alertInfo.mode) {\n        Alert.closeAll();\n\n        if (nextProps.alertInfo.mode === 'success') {\n          Alert.success(nextProps.alertInfo.msg, {\n            position: 'top-right',\n            effect: 'slide',\n            beep: true,\n            timeout: 5000,\n            offset: 100\n          });\n        } else if (nextProps.alertInfo.mode === 'error') {\n          Alert.error(nextProps.alertInfo.msg, {\n            position: 'top-right',\n            effect: 'slide',\n            beep: true,\n            timeout: 5000,\n            offset: 100\n          });\n        }\n\n        nextProps.handleAlertInfo('', '');\n      }\n    } //go to NEXT\n\n  }, {\n    key: \"goToNext\",\n    value: function goToNext(site) {\n      //set organization of localstorage\n      if (site == '/site4') {\n        localStorage.setItem('selectMenu', 'Organizations');\n      } //브라우져 입력창에 주소 기록\n\n\n      var mainPath = site;\n      var subPath = 'pg=0';\n      this.props.history.push({\n        pathname: mainPath,\n        search: subPath,\n        state: {\n          some: 'state'\n        }\n      });\n      this.props.history.location.search = subPath;\n      this.props.handleChangeSite({\n        mainPath: mainPath,\n        subPath: subPath\n      });\n    }\n  }, {\n    key: \"receiveUser\",\n    value: function receiveUser(result, resource, self) {\n      if (result) {// make Export usperpass\n      } else {//Alert()\n        }\n\n      self.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"getInfoSuperuser\",\n    value: function getInfoSuperuser(service) {\n      //static token : test token\n      //self.spuserToken = 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NTM0Njk3MjIsImlhdCI6MTU1MzM4MzMyMiwidXNlcm5hbWUiOiJtZXhhZG1pbiIsImtpZCI6M30.Ytg1JWV_iPXCcRfWtWtlVgp3JAKsDro6IqKWqngvf_iF06mLzTkHfCSb4a8E5jd0rWFrrXvfByKZPTjo44-ycQ'\n      if (self.spuserToken) {\n        self.setState({\n          loading: true\n        });\n        serviceLogin.getCurrentUserInfo(service, {\n          superuser: self.spuserToken\n        }, self.receiveUser);\n      } else {\n        //self.logoutRequest()\n        alert('Can not find token, Trying to minute later');\n      }\n    }\n  }, {\n    key: \"handleClickLogin\",\n    value: function handleClickLogin(mode) {\n      self.setState({\n        modalOpen: true\n      });\n      setTimeout(function () {\n        return self.props.handleChangeLoginMode(mode);\n      }, 500);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          clickedMarker = _this$state.clickedMarker,\n          hoveredMarker = _this$state.hoveredMarker,\n          mouseEvent = _this$state.mouseEvent;\n      return (// add data to \"data\" attribute, and render <Gio> tag\n        this.state.intro ? React.createElement(\"div\", {\n          style: {\n            width: '100%',\n            height: '100%',\n            overflow: 'hidden'\n          },\n          className: \"intro_globe\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, this.state.modalOpen && !this.state.logined ? React.createElement(Grid, {\n          style: {\n            backgroundColor: 'transparent',\n            width: 230,\n            height: 100,\n            position: 'absolute',\n            top: 20,\n            right: this.state.modalOpen ? 50 : 185,\n            alignSelf: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(Grid.Row, {\n          columns: 2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, React.createElement(Grid.Column, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this2.handleClickLogin('login');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, \"Login\"))), React.createElement(Grid.Column, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this2.handleClickLogin('signup');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, \"SignUp\"))))) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }), this.state.logined && React.createElement(\"div\", {\n          className: \"intro_gnb_header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"navbar_right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          },\n          __self: this\n        }, React.createElement(HeaderGlobalMini, {\n          handleClickLogin: this.handleClickLogin,\n          email: this.state.email,\n          dimmer: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }))), this.state.modalOpen && React.createElement(\"div\", {\n          className: \"intro_login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, React.createElement(Login, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        })), !this.state.modalOpen && React.createElement(\"div\", {\n          className: \"intro_link\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, React.createElement(Button, {\n          disabled: true,\n          key: \"0\",\n          onClick: function onClick() {\n            return _this2.goToNext('/site2');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, \"MobiledgeX Monitoring\"), React.createElement(Button, {\n          key: \"1\",\n          onClick: function onClick() {\n            return _this2.goToNext('/site4');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, \"MobiledgeX Compute\")), React.createElement(\"div\", {\n          className: \"loadingBox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246\n          },\n          __self: this\n        }, React.createElement(GridLoader, {\n          sizeUnit: \"px\",\n          size: 20,\n          color: '#70b2bc',\n          loading: this.state.loading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247\n          },\n          __self: this\n        }))) : React.createElement(\"div\", {\n          style: {\n            width: '100%',\n            height: '100%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, React.createElement(SiteOne, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }))\n      );\n    }\n  }]);\n\n  return EntranceGlobe;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    userInfo: state.userInfo ? state.userInfo : null,\n    loginMode: state.loginMode ? state.loginMode.mode : null,\n    alertInfo: {\n      mode: state.alertInfo.mode,\n      msg: state.alertInfo.msg\n    }\n  };\n}\n\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return {\n    handleChangeSite: function handleChangeSite(data) {\n      dispatch(actions.changeSite(data));\n    },\n    handleChangeTab: function handleChangeTab(data) {\n      dispatch(actions.changeTab(data));\n    },\n    handleChangeLoginMode: function handleChangeLoginMode(data) {\n      dispatch(actions.changeLoginMode(data));\n    },\n    handleUserInfo: function handleUserInfo(data) {\n      dispatch(actions.userInfo(data));\n    },\n    handleAlertInfo: function handleAlertInfo(mode, msg) {\n      dispatch(actions.alertInfo(mode, msg));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchProps)(EntranceGlobe);","map":{"version":3,"sources":["/Users/kyungjoon/react_pjt/edge-cloud-ui/src/sites/entranceGlob.js"],"names":["React","Component","Grid","Button","Container","Input","Label","Popup","Image","Login","MyAPI","LOCAL_STRAGE_KEY","connect","actions","HeaderGlobalMini","SiteOne","serviceLogin","GridLoader","Alert","src1","self","EntranceGlobe","logoutRequest","user","props","param","login_token","userToken","logout","then","results","localStorage","removeItem","goToNext","catch","err","gotoNext","setState","modalOpen","handleMarkerMouseover","mouseEvent","hoveredMarker","handleMarkerMouseout","handleMarkerClick","clickedMarker","alert","state","data","intro","loginState","loading","signup","logined","spuserToken","store","PROJECT_INIT","JSON","parse","params","mainPath","handleChangeLoginMode","nextProps","nextContext","loginMode","alertInfo","mode","closeAll","success","msg","position","effect","beep","timeout","offset","error","handleAlertInfo","site","setItem","subPath","history","push","pathname","search","some","location","handleChangeSite","result","resource","service","getCurrentUserInfo","superuser","receiveUser","setTimeout","width","height","overflow","backgroundColor","top","right","alignSelf","handleClickLogin","email","mapStateToProps","userInfo","mapDispatchProps","dispatch","changeSite","handleChangeTab","changeTab","changeLoginMode","handleUserInfo"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Grid, Button, Container, Input, Label, Popup, Image} from 'semantic-ui-react';\n// import React3DGlobe from '../libs/react3dglobe';\n// import { getMockData } from \"../libs/react3dglobe/mockData\";\nimport Login from '../components/login';\n// API\nimport * as MyAPI from '../components/utils/MyAPI';\nimport { LOCAL_STRAGE_KEY } from '../components/utils/Settings';\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\nimport HeaderGlobalMini from '../container/headerGlobalMini';\n\nimport SiteOne from './siteOne';\nimport * as serviceLogin from \"../services/service_login_api\";\n\nimport {GridLoader} from \"react-spinners\";\nimport Alert from 'react-s-alert';\n\n\n// const pointMarkers = getMockData(0x97bcd8, 'point');\nlet src1 = 'assets/images/backgroundGlob.png'\nlet self = null;\nclass EntranceGlobe extends Component {\n\n    constructor() {\n        super();\n\n        this.state = {\n            data: null,\n            intro:true,\n            clickedMarker: null,\n            hoveredMarker: null,\n            mouseEvent: null,\n            loginState:'out',\n            modalOpen: true,\n            loading:false,\n            signup:false,\n            logined: false\n        };\n        self = this;\n        this.spuserToken = null;\n    }\n\n    componentDidMount() {\n        let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT).userToken : null\n        if(store) {\n            this.setState({modalOpen: false, logined:true})\n\n        }\n        // && this.props.params.mainPath=='/logout'\n        if(this.props.params.mainPath === '/passwordreset') {\n            this.setState({modalOpen: true})\n            this.props.handleChangeLoginMode('resetPass')\n        }\n    }\n    componentWillReceiveProps(nextProps, nextContext) {\n\n        //alert(nextProps.loginMode+\":\"+this.props.loginMode)\n\n        if(nextProps.loginMode && nextProps.loginMode === 'verify') {\n            this.setState({modalOpen: true, logined:true})\n        } else if(nextProps.loginMode && nextProps.loginMode === 'forgot') {\n            this.setState({modalOpen: true, logined:false})\n        } else if(nextProps.loginMode === 'logout') {\n            this.setState({modalOpen: true, logined:false})\n        } else if(nextProps.loginMode === 'login') {\n            if(nextProps.user.userToken) {\n                this.setState({modalOpen: false, logined:true})\n            }\n        }\n\n\n        // if(nextProps.user.login_token !== undefined) {\n        //     this.setState({modalOpen: false})\n        //     self.setState({loading:true})\n        //     Alert.info('Please wait !', {\n        //         position: 'top-right',\n        //         effect: 'bouncyflip',\n        //         timeout: 'none'\n        //     });\n        // } else {\n        //     self.setState({loading:false})\n        //     this.setState({modalOpen: true})\n        //\n        // }\n\n        //\n        // if(nextProps.user.userToken !== undefined) {\n        //     this.spuserToken = nextProps.user.userToken;\n        //     this.setState({loading:false, modalOpen:false})\n        //     Alert.closeAll();\n        // }\n\n        //Redux Alert\n        if(nextProps.alertInfo.mode) {\n            Alert.closeAll();\n            if(nextProps.alertInfo.mode === 'success') {\n                Alert.success(nextProps.alertInfo.msg, {\n                    position: 'top-right',\n                    effect: 'slide',\n                    beep: true,\n                    timeout: 5000,\n                    offset: 100\n                });\n            } else if(nextProps.alertInfo.mode === 'error') {\n                Alert.error(nextProps.alertInfo.msg, {\n                    position: 'top-right',\n                    effect: 'slide',\n                    beep: true,\n                    timeout: 5000,\n                    offset: 100\n                });\n            }\n            nextProps.handleAlertInfo('','');\n        }\n\n    }\n\n    //go to NEXT\n    goToNext(site) {\n        //set organization of localstorage\n        if(site == '/site4') {\n            localStorage.setItem('selectMenu', 'Organizations')\n        }\n        //브라우져 입력창에 주소 기록\n        let mainPath = site;\n        let subPath = 'pg=0';\n        this.props.history.push({\n            pathname: mainPath,\n            search: subPath,\n            state: { some: 'state' }\n        });\n        this.props.history.location.search = subPath;\n        this.props.handleChangeSite({mainPath:mainPath, subPath: subPath})\n\n    }\n    receiveUser(result, resource, self) {\n\n        if(result) {\n            // make Export usperpass\n\n\n        } else {\n            //Alert()\n        }\n        self.setState({loading:false})\n    }\n\n    getInfoSuperuser(service) {\n\n        //static token : test token\n        //self.spuserToken = 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NTM0Njk3MjIsImlhdCI6MTU1MzM4MzMyMiwidXNlcm5hbWUiOiJtZXhhZG1pbiIsImtpZCI6M30.Ytg1JWV_iPXCcRfWtWtlVgp3JAKsDro6IqKWqngvf_iF06mLzTkHfCSb4a8E5jd0rWFrrXvfByKZPTjo44-ycQ'\n\n        if(self.spuserToken) {\n            self.setState({loading:true})\n            serviceLogin.getCurrentUserInfo(service, {superuser:self.spuserToken}, self.receiveUser)\n        } else {\n            //self.logoutRequest()\n            alert('Can not find token, Trying to minute later')\n        }\n    }\n    logoutRequest = () => {\n\n        const { user } = this.props\n\n        const param = {\n            login_token: user.userToken\n        }\n\n        MyAPI.logout(param)\n            .then((results) => {\n                localStorage.removeItem(LOCAL_STRAGE_KEY);\n                self.goToNext(\"/logout\")\n            })\n            .catch((err) => {\n                localStorage.removeItem(LOCAL_STRAGE_KEY);\n                self.gotoNext(\"/logout\")\n            })\n        this.setState({modalOpen:true})\n\n    }\n\n    handleMarkerMouseover = (mouseEvent, hoveredMarker) => {\n        this.setState({hoveredMarker, mouseEvent});\n    };\n\n    handleMarkerMouseout = mouseEvent => {\n        this.setState({hoveredMarker: null, mouseEvent});\n    };\n\n    handleMarkerClick = (mouseEvent, clickedMarker) => {\n        alert('mouse click == '+clickedMarker)\n        this.setState({clickedMarker, mouseEvent});\n    };\n\n    handleClickLogin(mode) {\n        self.setState({modalOpen: true})\n        setTimeout(() => self.props.handleChangeLoginMode(mode), 500);\n    }\n    render() {\n        const {clickedMarker, hoveredMarker, mouseEvent} = this.state;\n        return (\n\n            // add data to \"data\" attribute, and render <Gio> tag\n\n                (this.state.intro)?\n                    <div style={{width:'100%', height:'100%', overflow:'hidden'}} className=\"intro_globe\">\n                        {/*<React3DGlobe*/}\n                            {/*markers={pointMarkers}*/}\n                            {/*onMarkerMouseover={this.handleMarkerMouseover}*/}\n                            {/*onMarkerMouseout={this.handleMarkerMouseout}*/}\n                            {/*onMarkerClick={this.handleMarkerClick}*/}\n                        {/*/>*/}\n\n                        {(this.state.modalOpen && !this.state.logined)?\n                        <Grid style={{backgroundColor:'transparent', width:230, height:100, position:'absolute', top:20, right:(this.state.modalOpen)?50:185, alignSelf:'center'}}>\n                            <Grid.Row columns={2}>\n                                <Grid.Column><Button onClick={() => this.handleClickLogin('login')}><span>Login</span></Button></Grid.Column>\n                                <Grid.Column><Button onClick={() => this.handleClickLogin('signup')}><span>SignUp</span></Button></Grid.Column>\n                            </Grid.Row>\n                        </Grid>\n                        :<div></div>}\n\n                        {this.state.logined &&\n\n                        <div className='intro_gnb_header'>\n                            <div className='navbar_right'>\n                                <HeaderGlobalMini handleClickLogin={this.handleClickLogin} email={this.state.email} dimmer={false}></HeaderGlobalMini>\n                            </div>\n                        </div>\n                        }\n\n                        { this.state.modalOpen &&\n                        <div className='intro_login'>\n                            <Login></Login>\n                        </div>\n                        }\n                        {!this.state.modalOpen &&\n                        <div className='intro_link'>\n                            <Button disabled key='0' onClick={() => this.goToNext('/site2')}>MobiledgeX Monitoring</Button>\n                            <Button key='1' onClick={() => this.goToNext('/site4')}>MobiledgeX Compute</Button>\n                        </div>\n                        }\n\n\n                        <div className=\"loadingBox\">\n                            <GridLoader\n                                sizeUnit={\"px\"}\n                                size={20}\n                                color={'#70b2bc'}\n                                loading={this.state.loading}\n                            />\n                        </div>\n                    </div>\n                    :\n                    <div style={{width:'100%', height:'100%'}}>\n                        <SiteOne />\n                    </div>\n\n\n\n        )\n    }\n}\nfunction mapStateToProps ( state ) {\n    return {\n        user:state.user,\n        userInfo : state.userInfo?state.userInfo:null,\n        loginMode: state.loginMode?state.loginMode.mode:null,\n        alertInfo : {\n            mode: state.alertInfo.mode,\n            msg: state.alertInfo.msg\n        }\n    }\n}\nconst mapDispatchProps = (dispatch) => {\n    return {\n        handleChangeSite: (data) => { dispatch(actions.changeSite(data))},\n        handleChangeTab: (data) => { dispatch(actions.changeTab(data))},\n        handleChangeLoginMode: (data) => { dispatch(actions.changeLoginMode(data))},\n        handleUserInfo: (data) => { dispatch(actions.userInfo(data))},\n        handleAlertInfo: (mode,msg) => { dispatch(actions.alertInfo(mode,msg))}\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchProps)(EntranceGlobe);\n"]},"metadata":{},"sourceType":"module"}
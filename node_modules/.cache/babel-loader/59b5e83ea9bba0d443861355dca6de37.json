{"ast":null,"code":"import _defineProperty from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/sites/siteFour_page_apps.js\";\nimport React from 'react';\nimport sizeMe from 'react-sizeme';\nimport { withRouter } from 'react-router-dom'; //redux\n\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\nimport * as services from '../services/service_compute_service';\nimport './siteThree.css';\nimport InsideListView from '../container/insideListView';\nimport ListDetailViewer from '../container/listDetailViewer';\nvar _self = null;\nvar rgn = [];\n\nvar SiteFourPageApps =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SiteFourPageApps, _React$Component);\n\n  function SiteFourPageApps(props) {\n    var _this;\n\n    _classCallCheck(this, SiteFourPageApps);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SiteFourPageApps).call(this, props));\n\n    _this.handleItemClick = function (e, _ref) {\n      var name = _ref.name;\n      return _this.setState({\n        activeItem: name\n      });\n    };\n\n    _this.receiveResult = function (result, region) {\n      // @inki if data has expired token\n      if (result.error && result.error.indexOf('Expired') > -1) {\n        _self.props.handleAlertInfo('error', result.error);\n\n        setTimeout(function () {\n          return _self.gotoUrl('/logout');\n        }, 4000);\n\n        _self.props.handleLoadingSpinner(false);\n\n        return;\n      }\n\n      var join = null;\n\n      if (result[0]['Edit']) {\n        join = _self.state.devData.concat(result);\n      } else {\n        join = _self.state.devData;\n      }\n\n      _self.props.handleLoadingSpinner(false);\n\n      _self.setState({\n        devData: join\n      });\n\n      _self.loadCount++;\n\n      if (rgn.length == _self.loadCount) {\n        return;\n      }\n    };\n\n    _this.getDataDeveloper = function (token, region, regionArr) {\n      _this.props.handleLoadingSpinner(true);\n\n      var serviceBody = {};\n      _self.loadCount = 0;\n\n      _this.setState({\n        devData: []\n      });\n\n      if (region !== 'All') {\n        rgn = [region];\n      } else {\n        rgn = regionArr ? regionArr : _this.props.regionInfo.region;\n      }\n\n      if (localStorage.selectRole == 'AdminManager') {\n        rgn.map(function (item) {\n          // All show app\n          services.getMCService('ShowApps', {\n            token: token,\n            region: item\n          }, _self.receiveResult); // setTimeout(() => {services.getMCService('ShowApps',{token:token, region:item}, _self.receiveResult)}, 0)\n        });\n      } else {\n        rgn.map(function (item) {\n          serviceBody = {\n            \"token\": token,\n            \"params\": {\n              \"region\": item,\n              \"app\": {\n                \"key\": {\n                  \"developer_key\": {\n                    \"name\": localStorage.selectOrg\n                  }\n                }\n              }\n            }\n          }; // org별 show app\n\n          services.getMCService('ShowApp', serviceBody, _self.receiveResult);\n        });\n      }\n    };\n\n    _this.getDataDeveloperSub = function () {\n      var store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null;\n\n      _this.getDataDeveloper(store ? store.userToken : 'null', _this.props.region.value);\n    };\n\n    _self = _assertThisInitialized(_this);\n    _this.state = {\n      shouldShowBox: true,\n      shouldShowCircle: false,\n      contHeight: 0,\n      contWidth: 0,\n      bodyHeight: 0,\n      activeItem: 'Developers',\n      devData: [],\n      detailData: [],\n      viewMode: 'listView',\n      randomId: 0,\n      regionToggle: false\n    };\n    _this.headerH = 70;\n    _this.hgap = 0;\n    _this.loadCount = 0;\n    _this.headerLayout = [1, 3, 3, 1, 3, 1, 3, 4];\n    _this.hiddenKeys = ['ImagePath', 'DeploymentMF', 'ImageType', 'Command', 'Cluster', 'AuthPublicKey', 'DefaultFQDN', 'PackageName', 'ScaleWithCluster', 'Revision'];\n    _this.userToken = null;\n    return _this;\n  }\n\n  _createClass(SiteFourPageApps, [{\n    key: \"gotoUrl\",\n    value: function gotoUrl(site, subPath) {\n      var mainPath = site;\n\n      _self.props.history.push({\n        pathname: site,\n        search: subPath\n      });\n\n      _self.props.history.location.search = subPath;\n\n      _self.props.handleChangeSite({\n        mainPath: mainPath,\n        subPath: subPath\n      });\n    } //go to\n\n  }, {\n    key: \"gotoPreview\",\n    value: function gotoPreview(site) {\n      //브라우져 입력창에 주소 기록\n      var mainPath = site;\n      var subPath = 'pg=0';\n\n      _self.props.history.push({\n        pathname: mainPath,\n        search: subPath,\n        state: {\n          some: 'state'\n        }\n      });\n\n      _self.props.history.location.search = subPath;\n\n      _self.props.handleChangeSite({\n        mainPath: mainPath,\n        subPath: subPath\n      });\n    }\n  }, {\n    key: \"onHandleRegistry\",\n    value: function onHandleRegistry() {\n      this.props.handleInjectDeveloper('userInfo');\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        bodyHeight: window.innerHeight - this.headerH\n      });\n      this.setState({\n        contHeight: (window.innerHeight - this.headerH) / 2 - this.hgap\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null\n      // if(store && store.userToken) {\n      //     this.getDataDeveloper(store.userToken, this.props.region.value);\n      //     this.userToken = store.userToken;\n      // }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.setState({\n        devData: []\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      console.log(\"nextPropsnextProps\", nextProps.regionInfo);\n      this.setState({\n        bodyHeight: window.innerHeight - this.headerH\n      });\n      this.setState({\n        contHeight: (nextProps.size.height - this.headerH) / 2 - this.hgap\n      });\n      var store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null;\n\n      if (nextProps.receiveNewReg && nextProps.receiveNewReg.values) {//services.createNewApp('CreateApp', {params:nextProps.receiveNewReg.values, token:store.userToken, region:'US'}, _self.receiveResult)\n      }\n\n      if (this.props.region.value !== nextProps.region.value) {\n        this.getDataDeveloper(store ? store.userToken : 'null', nextProps.region.value);\n      }\n\n      if (nextProps.regionInfo.region.length && !this.state.regionToggle) {\n        _self.setState({\n          regionToggle: true,\n          regions: nextProps.regionInfo.region\n        });\n\n        this.getDataDeveloper(store ? store.userToken : 'null', nextProps.region.value, nextProps.regionInfo.region);\n      }\n\n      if (nextProps.computeRefresh.compute) {\n        this.getDataDeveloper(store ? store.userToken : 'null', nextProps.region.value);\n        this.props.handleComputeRefresh(false);\n      }\n\n      if (nextProps.viewMode) {\n        if (nextProps.viewMode === 'listView') {\n          this.setState({\n            viewMode: nextProps.viewMode\n          });\n          setTimeout(function () {\n            return _this2.setState({\n              devData: _this2.state.devData,\n              randomId: Math.random() * 1000\n            });\n          }, 300);\n        } else {\n          this.setState({\n            detailData: nextProps.detailData\n          });\n          this.forceUpdate();\n          setTimeout(function () {\n            return _this2.setState({\n              viewMode: nextProps.viewMode\n            });\n          }, 600);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      var _this$state = this.state,\n          viewMode = _this$state.viewMode,\n          detailData = _this$state.detailData,\n          devData = _this$state.devData,\n          randomId = _this$state.randomId;\n      return viewMode === 'listView' ? React.createElement(InsideListView, {\n        devData: devData,\n        headerLayout: this.headerLayout,\n        hiddenKeys: this.hiddenKeys,\n        siteId: 'App',\n        randomId: randomId,\n        userToken: this.userToken,\n        dataRefresh: this.getDataDeveloperSub,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }) : React.createElement(ListDetailViewer, (_React$createElement = {\n        data: detailData,\n        dimmer: false,\n        open: this.state.openDetail,\n        siteId: 'App',\n        close: this.closeDetail\n      }, _defineProperty(_React$createElement, \"siteId\", this.props.siteId), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement));\n    }\n  }]);\n\n  return SiteFourPageApps;\n}(React.Component);\n\n;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var registNew = state.form.registNewListInput ? {\n    values: state.form.registNewListInput.values,\n    submitSucceeded: state.form.registNewListInput.submitSucceeded\n  } : {};\n  var region = state.changeRegion ? {\n    value: state.changeRegion.region\n  } : {};\n  var viewMode = null;\n  var detailData = null;\n\n  if (state.changeViewMode.mode && state.changeViewMode.mode.viewMode) {\n    viewMode = state.changeViewMode.mode.viewMode;\n    detailData = state.changeViewMode.mode.data;\n  }\n\n  var regionInfo = state.regionInfo ? state.regionInfo : null;\n  return {\n    receiveNewReg: registNew,\n    region: region,\n    computeRefresh: state.computeRefresh ? state.computeRefresh : null,\n    selectOrg: state.selectOrg.org ? state.selectOrg.org : null,\n    userRole: state.showUserRole ? state.showUserRole.role : null,\n    viewMode: viewMode,\n    detailData: detailData,\n    regionInfo: regionInfo\n  };\n};\n\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return {\n    handleChangeSite: function handleChangeSite(data) {\n      dispatch(actions.changeSite(data));\n    },\n    handleInjectData: function handleInjectData(data) {\n      dispatch(actions.injectData(data));\n    },\n    handleInjectDeveloper: function handleInjectDeveloper(data) {\n      dispatch(actions.registDeveloper(data));\n    },\n    handleComputeRefresh: function handleComputeRefresh(data) {\n      dispatch(actions.computeRefresh(data));\n    },\n    handleLoadingSpinner: function handleLoadingSpinner(data) {\n      dispatch(actions.loadingSpinner(data));\n    },\n    handleAlertInfo: function handleAlertInfo(mode, msg) {\n      dispatch(actions.alertInfo(mode, msg));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(sizeMe({\n  monitorHeight: true\n})(SiteFourPageApps)));","map":{"version":3,"sources":["/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/sites/siteFour_page_apps.js"],"names":["React","sizeMe","withRouter","connect","actions","services","InsideListView","ListDetailViewer","_self","rgn","SiteFourPageApps","props","handleItemClick","e","name","setState","activeItem","receiveResult","result","region","error","indexOf","handleAlertInfo","setTimeout","gotoUrl","handleLoadingSpinner","join","state","devData","concat","loadCount","length","getDataDeveloper","token","regionArr","serviceBody","regionInfo","localStorage","selectRole","map","item","getMCService","selectOrg","getDataDeveloperSub","store","PROJECT_INIT","JSON","parse","userToken","value","shouldShowBox","shouldShowCircle","contHeight","contWidth","bodyHeight","detailData","viewMode","randomId","regionToggle","headerH","hgap","headerLayout","hiddenKeys","site","subPath","mainPath","history","push","pathname","search","location","handleChangeSite","some","handleInjectDeveloper","window","innerHeight","nextProps","console","log","size","height","receiveNewReg","values","regions","computeRefresh","compute","handleComputeRefresh","Math","random","forceUpdate","openDetail","closeDetail","siteId","Component","mapStateToProps","registNew","form","registNewListInput","submitSucceeded","changeRegion","changeViewMode","mode","data","org","userRole","showUserRole","role","mapDispatchProps","dispatch","changeSite","handleInjectData","injectData","registDeveloper","loadingSpinner","msg","alertInfo","monitorHeight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sizeMe from 'react-sizeme';\nimport { withRouter } from 'react-router-dom';\n//redux\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\nimport * as services from '../services/service_compute_service';\nimport './siteThree.css';\nimport InsideListView from '../container/insideListView';\nimport ListDetailViewer from '../container/listDetailViewer';\n\nlet _self = null;\nlet rgn = [];\nclass SiteFourPageApps extends React.Component {\n    constructor(props) {\n        super(props);\n        _self = this;\n        this.state = {\n            shouldShowBox: true,\n            shouldShowCircle: false,\n            contHeight:0,\n            contWidth:0,\n            bodyHeight:0,\n            activeItem: 'Developers',\n            devData:[],\n            detailData:[],\n            viewMode:'listView',\n            randomId:0,\n            regionToggle:false\n        };\n        this.headerH = 70;\n        this.hgap = 0;\n        this.loadCount = 0;\n\n        this.headerLayout = [1,3,3,1,3,1,3,4];\n        this.hiddenKeys = ['ImagePath', 'DeploymentMF', 'ImageType', 'Command', 'Cluster','AuthPublicKey','DefaultFQDN','PackageName','ScaleWithCluster','Revision']\n        this.userToken = null;\n\n    }\n    gotoUrl(site, subPath) {\n        let mainPath = site;\n        _self.props.history.push({\n            pathname: site,\n            search: subPath\n        });\n        _self.props.history.location.search = subPath;\n        _self.props.handleChangeSite({mainPath:mainPath, subPath: subPath})\n\n    }\n    //go to\n    gotoPreview(site) {\n        //브라우져 입력창에 주소 기록\n        let mainPath = site;\n        let subPath = 'pg=0';\n        _self.props.history.push({\n            pathname: mainPath,\n            search: subPath,\n            state: { some: 'state' }\n        });\n        _self.props.history.location.search = subPath;\n        _self.props.handleChangeSite({mainPath:mainPath, subPath: subPath})\n\n    }\n    handleItemClick = (e, { name }) => this.setState({ activeItem: name })\n\n    onHandleRegistry() {\n        this.props.handleInjectDeveloper('userInfo');\n    }\n    componentWillMount() {\n        this.setState({bodyHeight : (window.innerHeight - this.headerH)})\n        this.setState({contHeight:(window.innerHeight-this.headerH)/2 - this.hgap})\n    }\n    componentDidMount() {\n        // let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null\n        // if(store && store.userToken) {\n        //     this.getDataDeveloper(store.userToken, this.props.region.value);\n        //     this.userToken = store.userToken;\n        // }\n    }\n    componentWillUnmount() {\n        this.setState({devData:[]})\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n        console.log(\"nextPropsnextProps\",nextProps.regionInfo)\n        this.setState({bodyHeight : (window.innerHeight - this.headerH)})\n        this.setState({contHeight:(nextProps.size.height-this.headerH)/2 - this.hgap})\n        let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null\n        if(nextProps.receiveNewReg && nextProps.receiveNewReg.values) {\n            //services.createNewApp('CreateApp', {params:nextProps.receiveNewReg.values, token:store.userToken, region:'US'}, _self.receiveResult)\n        }\n        if(this.props.region.value !== nextProps.region.value){\n            this.getDataDeveloper(store ? store.userToken : 'null', nextProps.region.value);\n        }\n\n        if(nextProps.regionInfo.region.length && !this.state.regionToggle) {\n            _self.setState({regionToggle:true,regions:nextProps.regionInfo.region})\n            this.getDataDeveloper(store ? store.userToken : 'null',nextProps.region.value,nextProps.regionInfo.region);\n        }\n        if(nextProps.computeRefresh.compute) {\n            this.getDataDeveloper(store ? store.userToken : 'null',nextProps.region.value);\n            this.props.handleComputeRefresh(false);\n        }\n        if(nextProps.viewMode) {\n            if(nextProps.viewMode === 'listView') {\n                this.setState({viewMode:nextProps.viewMode});\n                setTimeout(() => this.setState({devData:this.state.devData, randomId:Math.random()*1000}), 300)\n            } else {\n                this.setState({detailData:nextProps.detailData})\n                this.forceUpdate()\n                setTimeout(() => this.setState({viewMode:nextProps.viewMode}), 600)\n            }\n\n        }\n    }\n    receiveResult = (result, region) => {\n        // @inki if data has expired token\n        if(result.error && result.error.indexOf('Expired') > -1) {\n            _self.props.handleAlertInfo('error', result.error);\n            setTimeout(() => _self.gotoUrl('/logout'), 4000);\n            _self.props.handleLoadingSpinner(false);\n            return;\n        }\n\n        let join = null;\n        if(result[0]['Edit']) {\n            join = _self.state.devData.concat(result);\n        } else {\n            join = _self.state.devData;\n        }\n        _self.props.handleLoadingSpinner(false);\n        _self.setState({devData:join})\n        _self.loadCount ++;\n        if(rgn.length == _self.loadCount){\n            return\n        }\n    }\n\n    getDataDeveloper = (token, region, regionArr) => {\n        this.props.handleLoadingSpinner(true);\n        let serviceBody = {}\n        _self.loadCount = 0;\n        this.setState({devData:[]})\n        if(region !== 'All'){\n            rgn = [region]\n        } else {\n            rgn = (regionArr)?regionArr:this.props.regionInfo.region;\n        }\n        if(localStorage.selectRole == 'AdminManager') {\n            rgn.map((item) => {\n                // All show app\n                services.getMCService('ShowApps',{token:token, region:item}, _self.receiveResult)\n                // setTimeout(() => {services.getMCService('ShowApps',{token:token, region:item}, _self.receiveResult)}, 0)\n            })\n        } else {\n            rgn.map((item) => {\n                serviceBody = {\n                    \"token\":token,\n                    \"params\": {\n                        \"region\":item,\n                        \"app\":{\n                            \"key\":{\n                                \"developer_key\":{\"name\":localStorage.selectOrg},\n                            }\n                        }\n                    }\n                }\n                // org별 show app\n                services.getMCService('ShowApp',serviceBody, _self.receiveResult)\n            })\n        }\n        \n    }\n    \n    getDataDeveloperSub = () => {\n        let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null\n        this.getDataDeveloper(store ? store.userToken : 'null', this.props.region.value);\n    }\n\n    render() {\n        const { viewMode, detailData, devData, randomId } = this.state;\n        return (\n            (viewMode === 'listView')?\n            <InsideListView devData={devData} headerLayout={this.headerLayout} hiddenKeys={this.hiddenKeys} siteId={'App'} randomId={randomId} userToken={this.userToken} dataRefresh={this.getDataDeveloperSub}></InsideListView>\n                :\n                <ListDetailViewer data={detailData} dimmer={false} open={this.state.openDetail} siteId={'App'} close={this.closeDetail} siteId={this.props.siteId}></ListDetailViewer>\n        );\n    }\n\n};\n\nconst mapStateToProps = (state) => {\n    let registNew= state.form.registNewListInput\n        ? {\n            values: state.form.registNewListInput.values,\n            submitSucceeded: state.form.registNewListInput.submitSucceeded\n        }\n        : {};\n    let region = state.changeRegion\n        ? {\n            value: state.changeRegion.region\n        }\n        : {};\n    let viewMode = null;\n    let detailData = null;\n    if(state.changeViewMode.mode && state.changeViewMode.mode.viewMode) {\n        viewMode = state.changeViewMode.mode.viewMode;\n        detailData = state.changeViewMode.mode.data;\n    }\n    let regionInfo = (state.regionInfo)?state.regionInfo:null;\n    return {\n        receiveNewReg:registNew,\n        region:region,\n        computeRefresh : (state.computeRefresh) ? state.computeRefresh: null,\n        selectOrg : state.selectOrg.org?state.selectOrg.org:null,\n        userRole : state.showUserRole?state.showUserRole.role:null,\n        viewMode : viewMode, detailData:detailData,\n        regionInfo: regionInfo\n    }\n};\n\nconst mapDispatchProps = (dispatch) => {\n    return {\n        handleChangeSite: (data) => { dispatch(actions.changeSite(data))},\n        handleInjectData: (data) => { dispatch(actions.injectData(data))},\n        handleInjectDeveloper: (data) => { dispatch(actions.registDeveloper(data))},\n        handleComputeRefresh: (data) => { dispatch(actions.computeRefresh(data))},\n        handleLoadingSpinner: (data) => { dispatch(actions.loadingSpinner(data))},\n        handleAlertInfo: (mode,msg) => { dispatch(actions.alertInfo(mode,msg))},\n    };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(sizeMe({ monitorHeight: true })(SiteFourPageApps)));\n"]},"metadata":{},"sourceType":"module"}
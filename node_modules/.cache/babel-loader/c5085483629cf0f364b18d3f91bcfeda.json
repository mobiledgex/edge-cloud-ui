{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _momentTimezone = require('moment-timezone');\n\nvar _momentTimezone2 = _interopRequireDefault(_momentTimezone);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar BASE_UNIT = 'milliseconds';\n\nvar ReactLiveClock = function (_React$Component) {\n  _inherits(ReactLiveClock, _React$Component);\n\n  function ReactLiveClock(props) {\n    _classCallCheck(this, ReactLiveClock);\n\n    var _this = _possibleConstructorReturn(this, (ReactLiveClock.__proto__ || Object.getPrototypeOf(ReactLiveClock)).call(this, props));\n\n    var date = props.date || props.children || null;\n    var timesatmp = (0, _momentTimezone2.default)();\n    var baseTime = date ? (0, _momentTimezone2.default)(new Date(date).getTime()) : timesatmp;\n    _this.state = {\n      realTime: !date,\n      now: baseTime,\n      baseTime: baseTime,\n      startTime: timesatmp\n    };\n    return _this;\n  }\n\n  _createClass(ReactLiveClock, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _props = this.props,\n          ticking = _props.ticking,\n          interval = _props.interval;\n\n      if (ticking && interval) {\n        this.tickTimer = setInterval(function () {\n          _this2.updateClock();\n        }, interval);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.tickTimer) {\n        clearInterval(this.tickTimer);\n      }\n    }\n  }, {\n    key: 'updateClock',\n    value: function updateClock() {\n      var realTime = this.state.realTime;\n\n      if (realTime) {\n        this.setState({\n          now: (0, _momentTimezone2.default)()\n        });\n      } else {\n        var _state = this.state,\n            baseTime = _state.baseTime,\n            startTime = _state.startTime;\n        var newTime = (0, _momentTimezone2.default)();\n        var diff = newTime.diff(startTime, BASE_UNIT);\n        this.setState({\n          now: baseTime.clone().add(diff, BASE_UNIT)\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          format = _props2.format,\n          timezone = _props2.timezone,\n          restProps = _objectWithoutProperties(_props2, ['format', 'timezone']);\n\n      var now = this.state.now;\n      var localizedTime = now;\n\n      if (timezone) {\n        localizedTime.tz(timezone);\n      }\n\n      var formattedTime = localizedTime.format(format);\n      var childProps = Object.keys(restProps).filter(function (key) {\n        return !['date', 'interval', 'ticking'].includes(key);\n      }).reduce(function (acc, key) {\n        acc[key] = restProps[key];\n        return acc;\n      }, {});\n      return _react2.default.createElement('time', childProps, formattedTime);\n    }\n  }]);\n\n  return ReactLiveClock;\n}(_react2.default.Component);\n\nexports.default = ReactLiveClock;\nReactLiveClock.propTypes = {\n  children: _propTypes2.default.string,\n  date: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  format: _propTypes2.default.string,\n  interval: _propTypes2.default.number,\n  ticking: _propTypes2.default.bool,\n  timezone: _propTypes2.default.string\n};\nReactLiveClock.defaultProps = {\n  date: null,\n  format: 'HH:mm',\n  interval: 1000,\n  ticking: false,\n  timezone: null\n};","map":{"version":3,"sources":["../src/Component.js"],"names":["BASE_UNIT","ReactLiveClock","Component","date","props","timesatmp","baseTime","realTime","now","startTime","ticking","interval","clearInterval","newTime","diff","format","timezone","restProps","localizedTime","formattedTime","childProps","acc","children","string"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment-timezone';\r\n\nconst BASE_UNIT = 'milliseconds';\r\n\nexport default class ReactLiveClock extends React.Component {\r\n  constructor(props) {\n    super(props);\n\n    const date = props.date || props.children || null;\n    const timesatmp = moment();\n    const baseTime = date ? moment(new Date(date).getTime()) : timesatmp;\n\n    this.state = {\n      realTime: !date,\n      now: baseTime,\n      baseTime,\n      startTime: timesatmp\n    };\n  }\n\n  componentDidMount() {\n    const {ticking, interval} = this.props;\n\r\n    if (ticking && interval) {\r\n      this.tickTimer = setInterval(() => {\n        this.updateClock();\r\n      }, interval);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.tickTimer) {\r\n      clearInterval(this.tickTimer);\r\n    }\r\n  }\r\n\n  updateClock() {\n    const {realTime} = this.state;\n\n    if (realTime) {\n      this.setState({\n        now: moment()\n      });\n    } else {\n      const {baseTime, startTime} = this.state;\n      const newTime = moment();\n      const diff = newTime.diff(startTime, BASE_UNIT);\n\n      this.setState({\n        now: baseTime.clone().add(diff, BASE_UNIT)\n      });\n    }\n  }\n\r\n  render() {\r\n    const {format, timezone, ...restProps} = this.props;\r\n    const {now} = this.state;\r\n    const localizedTime = now;\r\n\r\n    if (timezone) {\r\n      localizedTime.tz(timezone);\r\n    }\r\n\r\n    const formattedTime = localizedTime.format(format);\r\n\n    const childProps = Object.keys(restProps)\n      .filter(key => !['date', 'interval', 'ticking'].includes(key))\n      .reduce((acc, key) => {\n        acc[key] = restProps[key];\n        return acc;\n      }, {});\n\r\n    return (\r\n      <time {...childProps}>{ formattedTime }</time>\r\n    );\r\n  }\r\n}\r\n\r\nReactLiveClock.propTypes = {\r\n  children: PropTypes.string,\r\n  date: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.string\r\n  ]),\r\n  format: PropTypes.string,\r\n  interval: PropTypes.number,\r\n  ticking: PropTypes.bool,\r\n  timezone: PropTypes.string\r\n};\r\n\r\nReactLiveClock.defaultProps = {\r\n  date: null,\r\n  format: 'HH:mm',\r\n  interval: 1000,\r\n  ticking: false,\r\n  timezone: null\r\n};\r\n"]},"metadata":{},"sourceType":"script"}
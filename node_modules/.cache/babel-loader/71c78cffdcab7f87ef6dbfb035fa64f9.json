{"ast":null,"code":"import _objectSpread from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/libs/datamaps/datamap.js\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Datamaps from 'datamaps';\nvar MAP_CLEARING_PROPS = ['height', 'scope', 'setProjection', 'width'];\n\nvar propChangeRequiresMapClear = function propChangeRequiresMapClear(oldProps, newProps) {\n  return MAP_CLEARING_PROPS.some(function (key) {\n    return oldProps[key] !== newProps[key];\n  });\n};\n\nvar Datamap =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Datamap, _React$Component);\n\n  function Datamap(props) {\n    var _this;\n\n    _classCallCheck(this, Datamap);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Datamap).call(this, props));\n    _this.resizeMap = _this.resizeMap.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Datamap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.responsive) {\n        window.addEventListener('resize', this.resizeMap);\n      }\n\n      this.drawMap();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (propChangeRequiresMapClear(this.props, newProps)) {\n        this.clear();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.drawMap();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clear();\n\n      if (this.props.responsive) {\n        window.removeEventListener('resize', this.resizeMap);\n      }\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var container = this.refs.container;\n\n      for (var _i = 0, _Array$from = Array.from(container.childNodes); _i < _Array$from.length; _i++) {\n        var child = _Array$from[_i];\n        container.removeChild(child);\n      }\n\n      delete this.map;\n    }\n  }, {\n    key: \"drawMap\",\n    value: function drawMap() {\n      var _this$props = this.props,\n          arc = _this$props.arc,\n          arcOptions = _this$props.arcOptions,\n          bubbles = _this$props.bubbles,\n          bubbleOptions = _this$props.bubbleOptions,\n          data = _this$props.data,\n          graticule = _this$props.graticule,\n          labels = _this$props.labels,\n          updateChoroplethOptions = _this$props.updateChoroplethOptions,\n          props = _objectWithoutProperties(_this$props, [\"arc\", \"arcOptions\", \"bubbles\", \"bubbleOptions\", \"data\", \"graticule\", \"labels\", \"updateChoroplethOptions\"]);\n\n      var map = this.map;\n\n      if (!map) {\n        map = this.map = new Datamaps(_objectSpread({}, props, {\n          data: data,\n          element: this.refs.container\n        }));\n      } else {\n        map.updateChoropleth(data, updateChoroplethOptions);\n      }\n\n      if (arc) {\n        map.arc(arc, arcOptions);\n      }\n\n      if (bubbles) {\n        map.bubbles(bubbles, bubbleOptions);\n      }\n\n      if (graticule) {\n        map.graticule();\n      }\n\n      if (labels) {\n        map.labels();\n      }\n    }\n  }, {\n    key: \"resizeMap\",\n    value: function resizeMap() {\n      this.map.resize();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var style = _objectSpread({\n        height: '100%',\n        position: 'relative',\n        width: '100%'\n      }, this.props.style);\n\n      return React.createElement(\"div\", {\n        ref: \"container\",\n        style: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Datamap;\n}(React.Component);\n\nDatamap.propTypes = {\n  arc: PropTypes.array,\n  arcOptions: PropTypes.object,\n  bubbleOptions: PropTypes.object,\n  bubbles: PropTypes.array,\n  data: PropTypes.object,\n  graticule: PropTypes.bool,\n  height: PropTypes.any,\n  labels: PropTypes.bool,\n  responsive: PropTypes.bool,\n  style: PropTypes.object,\n  updateChoroplethOptions: PropTypes.object,\n  width: PropTypes.any\n};\nexport { Datamap as default };","map":{"version":3,"sources":["/Users/kyungjoon/react_pjt/edge-cloud-ui_current-working/src/libs/datamaps/datamap.js"],"names":["PropTypes","React","Datamaps","MAP_CLEARING_PROPS","propChangeRequiresMapClear","oldProps","newProps","some","key","Datamap","props","resizeMap","bind","responsive","window","addEventListener","drawMap","clear","removeEventListener","container","refs","Array","from","childNodes","child","removeChild","map","arc","arcOptions","bubbles","bubbleOptions","data","graticule","labels","updateChoroplethOptions","element","updateChoropleth","resize","style","height","position","width","Component","propTypes","array","object","bool","any"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport Datamaps from 'datamaps';\n\nconst MAP_CLEARING_PROPS = [\n\t'height', 'scope', 'setProjection', 'width'\n];\n\nconst propChangeRequiresMapClear = (oldProps, newProps) => {\n\treturn MAP_CLEARING_PROPS.some((key) =>\n\t\toldProps[key] !== newProps[key]\n\t);\n};\n\nexport default class Datamap extends React.Component {\n\n\tstatic propTypes = {\n\t\tarc: PropTypes.array,\n\t\tarcOptions: PropTypes.object,\n\t\tbubbleOptions: PropTypes.object,\n\t\tbubbles: PropTypes.array,\n\t\tdata: PropTypes.object,\n\t\tgraticule: PropTypes.bool,\n\t\theight: PropTypes.any,\n\t\tlabels: PropTypes.bool,\n\t\tresponsive: PropTypes.bool,\n\t\tstyle: PropTypes.object,\n\t\tupdateChoroplethOptions: PropTypes.object,\n\t\twidth: PropTypes.any\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.resizeMap = this.resizeMap.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.responsive) {\n\t\t\twindow.addEventListener('resize', this.resizeMap);\n\t\t}\n\t\tthis.drawMap();\n\t}\n\n\tcomponentWillReceiveProps(newProps) {\n\t\tif (propChangeRequiresMapClear(this.props, newProps)) {\n\t\t\tthis.clear();\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.drawMap();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.clear();\n\t\tif (this.props.responsive) {\n\t\t\twindow.removeEventListener('resize', this.resizeMap);\n\t\t}\n\t}\n\n\tclear() {\n\t\tconst { container } = this.refs;\n\n\t\tfor (const child of Array.from(container.childNodes)) {\n\t\t\tcontainer.removeChild(child);\n\t\t}\n\n\t\tdelete this.map;\n\t}\n\n\tdrawMap() {\n\t\tconst {\n\t\t\tarc,\n\t\t\tarcOptions,\n\t\t\tbubbles,\n\t\t\tbubbleOptions,\n\t\t\tdata,\n\t\t\tgraticule,\n\t\t\tlabels,\n\t\t\tupdateChoroplethOptions,\n\t\t\t...props\n\t\t} = this.props;\n\n\t\tlet map = this.map;\n\n\t\tif (!map) {\n\t\t\tmap = this.map = new Datamaps({\n\t\t\t\t...props,\n\t\t\t\tdata,\n\t\t\t\telement: this.refs.container\n\t\t\t});\n\t\t} else {\n\t\t\tmap.updateChoropleth(data, updateChoroplethOptions);\n\t\t}\n\n\t\tif (arc) {\n\t\t\tmap.arc(arc, arcOptions);\n\t\t}\n\n\t\tif (bubbles) {\n\t\t\tmap.bubbles(bubbles, bubbleOptions);\n\t\t}\n\n\t\tif (graticule) {\n\t\t\tmap.graticule();\n\t\t}\n\n\t\tif (labels) {\n\t\t\tmap.labels();\n\t\t}\n\t}\n\n\tresizeMap() {\n\t\tthis.map.resize();\n\t}\n\n\trender() {\n\t\tconst style = {\n\t\t\theight: '100%',\n\t\t\tposition: 'relative',\n\t\t\twidth: '100%',\n\t\t\t...this.props.style\n\t\t};\n\n\t\treturn <div ref=\"container\" style={style} />;\n\t}\n\n}\n"]},"metadata":{},"sourceType":"module"}
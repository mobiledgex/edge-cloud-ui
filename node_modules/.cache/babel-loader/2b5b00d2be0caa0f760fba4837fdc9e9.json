{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/kyungjoon/react_pjt/edge-cloud-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kyungjoon/react_pjt/edge-cloud-ui/src/sites/siteFour_page_audits.js\";\nimport React from 'react';\nimport { Grid, Image, Header, Menu, Dropdown, Button } from 'semantic-ui-react';\nimport sizeMe from 'react-sizeme';\nimport InstanceListView from '../container/instanceListView';\nimport { withRouter } from 'react-router-dom';\nimport MaterialIcon from 'material-icons-react';\nimport PageDetailViewer from '../container/pageDetailViewer'; //redux\n\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\nimport * as services from '../services/service_audit_api';\nimport './siteThree.css';\nimport TimelineAuditView from \"../container/TimelineAuditView\";\nimport Alert from \"react-s-alert\";\nimport * as reducer from '../utils';\nimport TimelineAuditViewNew from \"../container/TimelineAuditViewNew\";\nvar _self = null;\nvar rgn = ['US', 'KR', 'EU'];\n\nvar SiteFourPageAudits =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SiteFourPageAudits, _React$Component);\n\n  function SiteFourPageAudits(props) {\n    var _this;\n\n    _classCallCheck(this, SiteFourPageAudits);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SiteFourPageAudits).call(this, props));\n\n    _this.handleItemClick = function (e, _ref) {\n      var name = _ref.name;\n      return _this.setState({\n        activeItem: name\n      });\n    };\n\n    _this.receiveResult = function (result, resource, self, body) {\n      // @inki if data has expired token\n      console.log('20191106 receive result...', result, \":\", resource);\n\n      if (result.error && result.error.indexOf('Expired') > -1) {\n        _self.props.handleAlertInfo('error', result.error);\n\n        setTimeout(function () {\n          return _self.gotoUrl('/logout');\n        }, 4000);\n\n        _self.props.handleLoadingSpinner(false);\n\n        return;\n      } else if (result.error) {\n        _self.props.handleAlertInfo('error', result.error);\n      }\n\n      var unchecked = result.data.length;\n      var checked = localStorage.getItem('auditChecked');\n\n      if (resource === 'ShowSelf' || resource === 'ShowOrg') {\n        console.log('20191106 audit result..', result, \":\", resource, \": unchecked : \", unchecked);\n\n        _self.reduceAuditCount(result.data, checked);\n      }\n\n      _self.setState({\n        devData: result,\n        auditMounted: true\n      });\n\n      _self.props.handleLoadingSpinner(false);\n\n      if (rgn.length == _this.loadCount - 1) {\n        return;\n      }\n    };\n\n    _this.makeOga = function (logName) {\n      var lastSub = logName.substring(logName.lastIndexOf('=') + 1);\n      return lastSub;\n    };\n\n    _this.getDataAudit = function _callee(orgName) {\n      var store;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.props.handleLoadingSpinner(true);\n\n              store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null;\n\n              _this.setState({\n                devData: []\n              });\n\n              _this._cloudletDummy = [];\n              _self.loadCount = 0;\n\n              if (orgName) {\n                services.showAuditOrg('ShowOrg', {\n                  token: store.userToken,\n                  params: {\n                    \"org\": _self.makeOga(orgName)\n                  }\n                }, _self.receiveResult, _self);\n                /* try {\n                     let response = services.showAuditOrg2('ShowOrg', {\n                         token: store.userToken,\n                         params: {\"org\": _self.makeOga(orgName)}\n                     })\n                     this.receiveResult(response, 'ShowOrg')\n                 } catch (e) {\n                     //alert(e)\n                     this.props.handleLoadingSpinner(false);\n                 }*/\n              } else {\n                services.showAuditSelf('ShowSelf', {\n                  token: store.userToken,\n                  params: '{}'\n                }, _self.receiveResult, _self);\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.selectedAudit = function (selectedAudit) {\n      // if get same item find from storage should remove it.\n      var savedData = localStorage.getItem('auditUnChecked');\n      var checkData = localStorage.getItem('auditChecked');\n      var newCheckData = null;\n      var newData = null;\n\n      if (savedData) {\n        var parseSavedData = JSON.parse(savedData);\n        newData = parseSavedData.filter(function (item) {\n          return item !== selectedAudit.traceid;\n        });\n        newCheckData = JSON.parse(checkData);\n\n        if (newCheckData) {\n          //만약 이미 체크된 오딧 이면 배열에 넣지 않는다\n          if (newCheckData.findIndex(function (k) {\n            return k == selectedAudit.traceid;\n          }) === -1) {\n            newCheckData.push(selectedAudit.traceid);\n          } else {}\n        } else {\n          newCheckData = [selectedAudit.traceid];\n        }\n\n        console.log('20191022 newData // newCheckData ...', newCheckData, \":\", typeof newCheckData);\n      } //console.log('20191022 filtering audit checked ...', newData, \":\", newData.length)\n\n\n      localStorage.setItem('auditChecked', JSON.stringify(newCheckData)); //refresh number badge of Audit Log button\n\n      var allCnt = JSON.parse(savedData).length;\n      var selectedCnt = newCheckData.length;\n      if (newData && newData.length) _self.props.handleAuditCheckCount(allCnt - selectedCnt);\n    };\n\n    _self = _assertThisInitialized(_this);\n    _this.state = {\n      shouldShowBox: true,\n      shouldShowCircle: false,\n      contHeight: 0,\n      contWidth: 0,\n      bodyHeight: 0,\n      activeItem: 'Developers',\n      devData: [],\n      viewMode: 'listView',\n      auditMounted: false\n    };\n    _this.headerH = 70;\n    _this.hgap = 0;\n    _this.hiddenKeys = ['Ip_support', 'Num_dynamic_ips', 'Status', 'Physical_name', 'Platform_type'];\n    _this.headerLayout = [1, 3, 3, 3, 2, 2, 2];\n    _this.userToken = null;\n    _this._devData = [];\n    _this.loadCount = 0;\n    _this._cloudletDummy = [];\n    return _this;\n  }\n\n  _createClass(SiteFourPageAudits, [{\n    key: \"gotoUrl\",\n    value: function gotoUrl(site, subPath) {\n      _self.props.history.push({\n        pathname: site,\n        search: subPath\n      });\n\n      _self.props.history.location.search = subPath;\n    } //go to\n\n  }, {\n    key: \"gotoPreview\",\n    value: function gotoPreview(site) {\n      //브라우져 입력창에 주소 기록\n      var mainPath = site;\n      var subPath = 'pg=0';\n\n      _self.props.history.push({\n        pathname: mainPath,\n        search: subPath,\n        state: {\n          some: 'state'\n        }\n      });\n\n      _self.props.history.location.search = subPath;\n\n      _self.props.handleChangeSite({\n        mainPath: mainPath,\n        subPath: subPath\n      });\n    }\n  }, {\n    key: \"onHandleRegistry\",\n    value: function onHandleRegistry() {\n      this.props.handleInjectDeveloper('userInfo');\n    }\n  }, {\n    key: \"readyToData\",\n    value: function readyToData(subPaths) {\n      console.log('20191018 subPaths.subPaths...', subPaths, \":\", subPaths.indexOf('&org='));\n      var subPath = '';\n      var subParam = null;\n\n      if (subPaths.indexOf('&org=') > -1) {\n        var paths = subPaths.split('&');\n        subPath = paths[0];\n        subParam = paths[1];\n      }\n\n      this.setState({\n        devData: []\n      });\n      this.setState({\n        page: subPath,\n        OrganizationName: subParam\n      });\n      this.props.handleLoadingSpinner(true); // get audits data\n\n      this.getDataAudit(subParam);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        bodyHeight: window.innerHeight - this.headerH\n      });\n      this.setState({\n        contHeight: (window.innerHeight - this.headerH) / 2 - this.hgap\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.location && this.props.location.search) {\n        this.readyToData(this.props.location.search);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._devData = [];\n      this._cloudletDummy = [];\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps, nextContext) {\n      var _this2 = this;\n\n      this.setState({\n        bodyHeight: window.innerHeight - this.headerH\n      });\n      this.setState({\n        contHeight: (nextProps.size.height - this.headerH) / 2 - this.hgap\n      });\n\n      if (nextProps.viewMode) {\n        if (nextProps.viewMode === 'listView') {\n          this.setState({\n            viewMode: nextProps.viewMode\n          });\n        } else {\n          this.setState({\n            viewMode: nextProps.viewMode\n          });\n          setTimeout(function () {\n            return _this2.setState({\n              detailData: nextProps.detailData\n            });\n          }, 300);\n        }\n      } //\n\n\n      if (nextProps.location && nextProps.location.search && nextProps.location.search !== this.props.location.search) {\n        console.log('20191018 nextProps.props...', nextProps.location.search, \":\", this.props.location.search);\n        this.setState({\n          auditMounted: true\n        });\n        this.readyToData(nextProps.location.search);\n      }\n    }\n  }, {\n    key: \"reduceAuditCount\",\n    value: function reduceAuditCount(all, data) {\n      var itemArray = [];\n      var addArray = [];\n      var savedArray = localStorage.getItem('auditUnChecked');\n      var checkedArray = localStorage.getItem('auditChecked');\n      var checked = [];\n      console.log('20191105 item is -- ', all, \"  :  \", JSON.parse(savedArray), typeof JSON.parse(savedArray));\n\n      if (all.error) {\n        this.props.handleAlertInfo('error', all.error);\n      } else {\n        all.map(function (item, i) {\n          if (savedArray && JSON.parse(savedArray).length) {\n            console.log('20191022 item is -- ', JSON.parse(savedArray).findIndex(function (k) {\n              return k == item.traceid;\n            })); //이전에 없던 데이터 이면 추가하기\n\n            if (JSON.parse(savedArray).findIndex(function (k) {\n              return k == item.traceid;\n            }) === -1) addArray.push(item.traceid);\n          } else {\n            itemArray.push(item.traceid);\n          }\n        });\n\n        if (addArray.length) {\n          console.log('20191022 if has new data ... ', addArray);\n          JSON.parse(savedArray).concat(addArray);\n        } // 이제 새로운 데이터에서 체크된 오딧은 제거\n\n\n        var checkResult = null;\n\n        if (savedArray && JSON.parse(savedArray).length) {\n          checkResult = JSON.parse(savedArray);\n        } else if (itemArray.length) {\n          checkResult = itemArray;\n        }\n\n        checked = checkedArray ? JSON.parse(checkedArray) : [];\n        console.log('20191022  unchecked... is -- ', checkResult.length, \":\", checked.length, \" - \", checkResult.length - checked.length);\n        this.props.handleAuditCheckCount(checkResult.length - checked.length);\n        localStorage.setItem('auditUnChecked', JSON.stringify(checkResult));\n      }\n    }\n  }, {\n    key: \"countJoin\",\n    value: function countJoin() {\n      var cloudlet = this._cloudletDummy;\n\n      _self.setState({\n        devData: cloudlet\n      });\n\n      this.props.handleLoadingSpinner(false);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          shouldShowBox = _this$state.shouldShowBox,\n          shouldShowCircle = _this$state.shouldShowCircle;\n      var _this$state2 = this.state,\n          activeItem = _this$state2.activeItem,\n          viewMode = _this$state2.viewMode;\n      var randomValue = Math.round(Math.random() * 100);\n      return viewMode === 'listView' ? React.createElement(TimelineAuditViewNew, {\n        data: this.state.devData,\n        randomValue: randomValue,\n        headerLayout: this.headerLayout,\n        hiddenKeys: this.hiddenKeys,\n        siteId: 'Audit',\n        userToken: this.userToken,\n        mounted: this.state.auditMounted,\n        handleSelectedAudit: this.selectedAudit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return SiteFourPageAudits;\n}(React.Component);\n\n;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var viewMode = null;\n  var detailData = null;\n\n  if (state.changeViewMode.mode && state.changeViewMode.mode.viewMode) {\n    viewMode = state.changeViewMode.mode.viewMode;\n    detailData = state.changeViewMode.mode.data;\n  }\n\n  return {\n    computeRefresh: state.computeRefresh ? state.computeRefresh : null,\n    changeRegion: state.changeRegion.region ? state.changeRegion.region : null,\n    viewMode: viewMode,\n    detailData: detailData\n  };\n};\n\nvar mapDispatchProps = function mapDispatchProps(dispatch) {\n  return {\n    handleChangeSite: function handleChangeSite(data) {\n      dispatch(actions.changeSite(data));\n    },\n    handleInjectData: function handleInjectData(data) {\n      dispatch(actions.injectData(data));\n    },\n    handleInjectDeveloper: function handleInjectDeveloper(data) {\n      dispatch(actions.registDeveloper(data));\n    },\n    handleComputeRefresh: function handleComputeRefresh(data) {\n      dispatch(actions.computeRefresh(data));\n    },\n    handleLoadingSpinner: function handleLoadingSpinner(data) {\n      dispatch(actions.loadingSpinner(data));\n    },\n    handleAlertInfo: function handleAlertInfo(mode, msg) {\n      dispatch(actions.alertInfo(mode, msg));\n    },\n    handleDetail: function handleDetail(data) {\n      dispatch(actions.changeDetail(data));\n    },\n    handleAuditCheckCount: function handleAuditCheckCount(data) {\n      dispatch(actions.setCheckedAudit(data));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(sizeMe({\n  monitorHeight: true\n})(SiteFourPageAudits)));","map":{"version":3,"sources":["/Users/kyungjoon/react_pjt/edge-cloud-ui/src/sites/siteFour_page_audits.js"],"names":["React","Grid","Image","Header","Menu","Dropdown","Button","sizeMe","InstanceListView","withRouter","MaterialIcon","PageDetailViewer","connect","actions","services","TimelineAuditView","Alert","reducer","TimelineAuditViewNew","_self","rgn","SiteFourPageAudits","props","handleItemClick","e","name","setState","activeItem","receiveResult","result","resource","self","body","console","log","error","indexOf","handleAlertInfo","setTimeout","gotoUrl","handleLoadingSpinner","unchecked","data","length","checked","localStorage","getItem","reduceAuditCount","devData","auditMounted","loadCount","makeOga","logName","lastSub","substring","lastIndexOf","getDataAudit","orgName","store","PROJECT_INIT","JSON","parse","_cloudletDummy","showAuditOrg","token","userToken","params","showAuditSelf","selectedAudit","savedData","checkData","newCheckData","newData","parseSavedData","filter","item","traceid","findIndex","k","push","setItem","stringify","allCnt","selectedCnt","handleAuditCheckCount","state","shouldShowBox","shouldShowCircle","contHeight","contWidth","bodyHeight","viewMode","headerH","hgap","hiddenKeys","headerLayout","_devData","site","subPath","history","pathname","search","location","mainPath","some","handleChangeSite","handleInjectDeveloper","subPaths","subParam","paths","split","page","OrganizationName","window","innerHeight","readyToData","nextProps","nextContext","size","height","detailData","all","itemArray","addArray","savedArray","checkedArray","map","i","concat","checkResult","cloudlet","randomValue","Math","round","random","Component","mapStateToProps","changeViewMode","mode","computeRefresh","changeRegion","region","mapDispatchProps","dispatch","changeSite","handleInjectData","injectData","registDeveloper","handleComputeRefresh","loadingSpinner","msg","alertInfo","handleDetail","changeDetail","setCheckedAudit","monitorHeight"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,EAAcC,KAAd,EAAqBC,MAArB,EAA6BC,IAA7B,EAAmCC,QAAnC,EAA6CC,MAA7C,QAA0D,mBAA1D;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AACA,OAAOC,gBAAP,MAA6B,+BAA7B,C,CACA;;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,OAAO,KAAKC,OAAZ,MAAyB,YAAzB;AACA,OAAO,KAAKC,QAAZ,MAA0B,+BAA1B;AACA,OAAO,iBAAP;AACA,OAAOC,iBAAP,MAA8B,gCAA9B;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAO,KAAKC,OAAZ,MAAyB,UAAzB;AACA,OAAOC,oBAAP,MAAiC,mCAAjC;AAGA,IAAIC,KAAK,GAAG,IAAZ;AACA,IAAIC,GAAG,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAV;;IAEMC,kB;;;;;AACF,8BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,4FAAMA,KAAN;;AADe,UAgDnBC,eAhDmB,GAgDD,UAACC,CAAD;AAAA,UAAKC,IAAL,QAAKA,IAAL;AAAA,aAAe,MAAKC,QAAL,CAAc;AAACC,QAAAA,UAAU,EAAEF;AAAb,OAAd,CAAf;AAAA,KAhDC;;AAAA,UA4JnBG,aA5JmB,GA4JH,UAACC,MAAD,EAASC,QAAT,EAAmBC,IAAnB,EAAyBC,IAAzB,EAAkC;AAC9C;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CL,MAA1C,EAAkD,GAAlD,EAAuDC,QAAvD;;AACA,UAAID,MAAM,CAACM,KAAP,IAAgBN,MAAM,CAACM,KAAP,CAAaC,OAAb,CAAqB,SAArB,IAAkC,CAAC,CAAvD,EAA0D;AACtDjB,QAAAA,KAAK,CAACG,KAAN,CAAYe,eAAZ,CAA4B,OAA5B,EAAqCR,MAAM,CAACM,KAA5C;;AACAG,QAAAA,UAAU,CAAC;AAAA,iBAAMnB,KAAK,CAACoB,OAAN,CAAc,SAAd,CAAN;AAAA,SAAD,EAAiC,IAAjC,CAAV;;AACApB,QAAAA,KAAK,CAACG,KAAN,CAAYkB,oBAAZ,CAAiC,KAAjC;;AACA;AACH,OALD,MAKO,IAAIX,MAAM,CAACM,KAAX,EAAkB;AACrBhB,QAAAA,KAAK,CAACG,KAAN,CAAYe,eAAZ,CAA4B,OAA5B,EAAqCR,MAAM,CAACM,KAA5C;AACH;;AAED,UAAIM,SAAS,GAAGZ,MAAM,CAACa,IAAP,CAAYC,MAA5B;AACA,UAAIC,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAd;;AACA,UAAIhB,QAAQ,KAAK,UAAb,IAA2BA,QAAQ,KAAK,SAA5C,EAAuD;AACnDG,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCL,MAAvC,EAA+C,GAA/C,EAAoDC,QAApD,EAA8D,gBAA9D,EAAgFW,SAAhF;;AACAtB,QAAAA,KAAK,CAAC4B,gBAAN,CAAuBlB,MAAM,CAACa,IAA9B,EAAoCE,OAApC;AAEH;;AACDzB,MAAAA,KAAK,CAACO,QAAN,CAAe;AAACsB,QAAAA,OAAO,EAAEnB,MAAV;AAAkBoB,QAAAA,YAAY,EAAE;AAAhC,OAAf;;AACA9B,MAAAA,KAAK,CAACG,KAAN,CAAYkB,oBAAZ,CAAiC,KAAjC;;AACA,UAAIpB,GAAG,CAACuB,MAAJ,IAAc,MAAKO,SAAL,GAAiB,CAAnC,EAAsC;AAClC;AACH;AAGJ,KAtLkB;;AAAA,UA8LnBC,OA9LmB,GA8LT,UAACC,OAAD,EAAa;AACnB,UAAIC,OAAO,GAAGD,OAAO,CAACE,SAAR,CAAkBF,OAAO,CAACG,WAAR,CAAoB,GAApB,IAA2B,CAA7C,CAAd;AACA,aAAOF,OAAP;AACH,KAjMkB;;AAAA,UAkMnBG,YAlMmB,GAkMJ,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACV,oBAAKnC,KAAL,CAAWkB,oBAAX,CAAgC,IAAhC;;AACGkB,cAAAA,KAFO,GAECb,YAAY,CAACc,YAAb,GAA4BC,IAAI,CAACC,KAAL,CAAWhB,YAAY,CAACc,YAAxB,CAA5B,GAAoE,IAFrE;;AAGX,oBAAKjC,QAAL,CAAc;AAACsB,gBAAAA,OAAO,EAAE;AAAV,eAAd;;AACA,oBAAKc,cAAL,GAAsB,EAAtB;AACA3C,cAAAA,KAAK,CAAC+B,SAAN,GAAkB,CAAlB;;AAEA,kBAAIO,OAAJ,EAAa;AACT3C,gBAAAA,QAAQ,CAACiD,YAAT,CAAsB,SAAtB,EAAgC;AAACC,kBAAAA,KAAK,EAACN,KAAK,CAACO,SAAb;AAAwBC,kBAAAA,MAAM,EAAC;AAAC,2BAAM/C,KAAK,CAACgC,OAAN,CAAcM,OAAd;AAAP;AAA/B,iBAAhC,EAAgGtC,KAAK,CAACS,aAAtG,EAAqHT,KAArH;AACD;;;;;;;;;;AAWF,eAbD,MAaO;AACHL,gBAAAA,QAAQ,CAACqD,aAAT,CAAuB,UAAvB,EAAmC;AAACH,kBAAAA,KAAK,EAAEN,KAAK,CAACO,SAAd;AAAyBC,kBAAAA,MAAM,EAAE;AAAjC,iBAAnC,EAA2E/C,KAAK,CAACS,aAAjF,EAAgGT,KAAhG;AACH;;AAtBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAlMI;;AAAA,UA0NnBiD,aA1NmB,GA0NH,UAACA,aAAD,EAAmB;AAC/B;AACA,UAAIC,SAAS,GAAGxB,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAhB;AACA,UAAIwB,SAAS,GAAGzB,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhB;AACA,UAAIyB,YAAY,GAAG,IAAnB;AACA,UAAIC,OAAO,GAAG,IAAd;;AACA,UAAIH,SAAJ,EAAe;AACX,YAAII,cAAc,GAAGb,IAAI,CAACC,KAAL,CAAWQ,SAAX,CAArB;AACAG,QAAAA,OAAO,GAAGC,cAAc,CAACC,MAAf,CAAsB,UAAUC,IAAV,EAAgB;AAC5C,iBAAOA,IAAI,KAAKP,aAAa,CAACQ,OAA9B;AACH,SAFS,CAAV;AAGAL,QAAAA,YAAY,GAAGX,IAAI,CAACC,KAAL,CAAWS,SAAX,CAAf;;AAEA,YAAIC,YAAJ,EAAkB;AACd;AACA,cAAIA,YAAY,CAACM,SAAb,CAAuB,UAAAC,CAAC;AAAA,mBAAIA,CAAC,IAAIV,aAAa,CAACQ,OAAvB;AAAA,WAAxB,MAA4D,CAAC,CAAjE,EAAoE;AAChEL,YAAAA,YAAY,CAACQ,IAAb,CAAkBX,aAAa,CAACQ,OAAhC;AACH,WAFD,MAEO,CAEN;AAEJ,SARD,MAQO;AACHL,UAAAA,YAAY,GAAG,CAACH,aAAa,CAACQ,OAAf,CAAf;AACH;;AACD3C,QAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ,EAAoDqC,YAApD,EAAkE,GAAlE,EAAuE,OAAOA,YAA9E;AAGH,OA3B8B,CA4B/B;;;AACA1B,MAAAA,YAAY,CAACmC,OAAb,CAAqB,cAArB,EAAqCpB,IAAI,CAACqB,SAAL,CAAeV,YAAf,CAArC,EA7B+B,CA+B/B;;AACA,UAAIW,MAAM,GAAGtB,IAAI,CAACC,KAAL,CAAWQ,SAAX,EAAsB1B,MAAnC;AACA,UAAIwC,WAAW,GAAGZ,YAAY,CAAC5B,MAA/B;AACA,UAAI6B,OAAO,IAAIA,OAAO,CAAC7B,MAAvB,EAA+BxB,KAAK,CAACG,KAAN,CAAY8D,qBAAZ,CAAkCF,MAAM,GAAGC,WAA3C;AAElC,KA9PkB;;AAEfhE,IAAAA,KAAK,gCAAL;AACA,UAAKkE,KAAL,GAAa;AACTC,MAAAA,aAAa,EAAE,IADN;AAETC,MAAAA,gBAAgB,EAAE,KAFT;AAGTC,MAAAA,UAAU,EAAE,CAHH;AAITC,MAAAA,SAAS,EAAE,CAJF;AAKTC,MAAAA,UAAU,EAAE,CALH;AAMT/D,MAAAA,UAAU,EAAE,YANH;AAOTqB,MAAAA,OAAO,EAAE,EAPA;AAQT2C,MAAAA,QAAQ,EAAE,UARD;AAST1C,MAAAA,YAAY,EAAE;AATL,KAAb;AAWA,UAAK2C,OAAL,GAAe,EAAf;AACA,UAAKC,IAAL,GAAY,CAAZ;AACA,UAAKC,UAAL,GAAkB,CAAC,YAAD,EAAe,iBAAf,EAAkC,QAAlC,EAA4C,eAA5C,EAA6D,eAA7D,CAAlB;AACA,UAAKC,YAAL,GAAoB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAApB;AACA,UAAK9B,SAAL,GAAiB,IAAjB;AACA,UAAK+B,QAAL,GAAgB,EAAhB;AACA,UAAK9C,SAAL,GAAiB,CAAjB;AACA,UAAKY,cAAL,GAAsB,EAAtB;AArBe;AAsBlB;;;;4BAEOmC,I,EAAMC,O,EAAS;AACnB/E,MAAAA,KAAK,CAACG,KAAN,CAAY6E,OAAZ,CAAoBpB,IAApB,CAAyB;AACrBqB,QAAAA,QAAQ,EAAEH,IADW;AAErBI,QAAAA,MAAM,EAAEH;AAFa,OAAzB;;AAIA/E,MAAAA,KAAK,CAACG,KAAN,CAAY6E,OAAZ,CAAoBG,QAApB,CAA6BD,MAA7B,GAAsCH,OAAtC;AAEH,K,CAED;;;;gCACYD,I,EAAM;AACd;AACA,UAAIM,QAAQ,GAAGN,IAAf;AACA,UAAIC,OAAO,GAAG,MAAd;;AACA/E,MAAAA,KAAK,CAACG,KAAN,CAAY6E,OAAZ,CAAoBpB,IAApB,CAAyB;AACrBqB,QAAAA,QAAQ,EAAEG,QADW;AAErBF,QAAAA,MAAM,EAAEH,OAFa;AAGrBb,QAAAA,KAAK,EAAE;AAACmB,UAAAA,IAAI,EAAE;AAAP;AAHc,OAAzB;;AAKArF,MAAAA,KAAK,CAACG,KAAN,CAAY6E,OAAZ,CAAoBG,QAApB,CAA6BD,MAA7B,GAAsCH,OAAtC;;AACA/E,MAAAA,KAAK,CAACG,KAAN,CAAYmF,gBAAZ,CAA6B;AAACF,QAAAA,QAAQ,EAAEA,QAAX;AAAqBL,QAAAA,OAAO,EAAEA;AAA9B,OAA7B;AAEH;;;uCAIkB;AACf,WAAK5E,KAAL,CAAWoF,qBAAX,CAAiC,UAAjC;AACH;;;gCAEWC,Q,EAAU;AAClB1E,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CyE,QAA7C,EAAuD,GAAvD,EAA4DA,QAAQ,CAACvE,OAAT,CAAiB,OAAjB,CAA5D;AACA,UAAI8D,OAAO,GAAG,EAAd;AACA,UAAIU,QAAQ,GAAG,IAAf;;AACA,UAAID,QAAQ,CAACvE,OAAT,CAAiB,OAAjB,IAA4B,CAAC,CAAjC,EAAoC;AAChC,YAAIyE,KAAK,GAAGF,QAAQ,CAACG,KAAT,CAAe,GAAf,CAAZ;AACAZ,QAAAA,OAAO,GAAGW,KAAK,CAAC,CAAD,CAAf;AACAD,QAAAA,QAAQ,GAAGC,KAAK,CAAC,CAAD,CAAhB;AACH;;AACD,WAAKnF,QAAL,CAAc;AAACsB,QAAAA,OAAO,EAAE;AAAV,OAAd;AACA,WAAKtB,QAAL,CAAc;AAACqF,QAAAA,IAAI,EAAEb,OAAP;AAAgBc,QAAAA,gBAAgB,EAAEJ;AAAlC,OAAd;AACA,WAAKtF,KAAL,CAAWkB,oBAAX,CAAgC,IAAhC,EAXkB,CAYlB;;AACA,WAAKgB,YAAL,CAAkBoD,QAAlB;AACH;;;yCAGoB;AACjB,WAAKlF,QAAL,CAAc;AAACgE,QAAAA,UAAU,EAAGuB,MAAM,CAACC,WAAP,GAAqB,KAAKtB;AAAxC,OAAd;AACA,WAAKlE,QAAL,CAAc;AAAC8D,QAAAA,UAAU,EAAE,CAACyB,MAAM,CAACC,WAAP,GAAqB,KAAKtB,OAA3B,IAAsC,CAAtC,GAA0C,KAAKC;AAA5D,OAAd;AACH;;;wCAEmB;AAEhB,UAAI,KAAKvE,KAAL,CAAWgF,QAAX,IAAuB,KAAKhF,KAAL,CAAWgF,QAAX,CAAoBD,MAA/C,EAAuD;AACnD,aAAKc,WAAL,CAAiB,KAAK7F,KAAL,CAAWgF,QAAX,CAAoBD,MAArC;AAEH;AACJ;;;2CAEsB;AACnB,WAAKL,QAAL,GAAgB,EAAhB;AACA,WAAKlC,cAAL,GAAsB,EAAtB;AAEH;;;8CAGyBsD,S,EAAWC,W,EAAa;AAAA;;AAE9C,WAAK3F,QAAL,CAAc;AAACgE,QAAAA,UAAU,EAAGuB,MAAM,CAACC,WAAP,GAAqB,KAAKtB;AAAxC,OAAd;AACA,WAAKlE,QAAL,CAAc;AAAC8D,QAAAA,UAAU,EAAE,CAAC4B,SAAS,CAACE,IAAV,CAAeC,MAAf,GAAwB,KAAK3B,OAA9B,IAAyC,CAAzC,GAA6C,KAAKC;AAA/D,OAAd;;AACA,UAAIuB,SAAS,CAACzB,QAAd,EAAwB;AACpB,YAAIyB,SAAS,CAACzB,QAAV,KAAuB,UAA3B,EAAuC;AACnC,eAAKjE,QAAL,CAAc;AAACiE,YAAAA,QAAQ,EAAEyB,SAAS,CAACzB;AAArB,WAAd;AACH,SAFD,MAEO;AACH,eAAKjE,QAAL,CAAc;AAACiE,YAAAA,QAAQ,EAAEyB,SAAS,CAACzB;AAArB,WAAd;AACArD,UAAAA,UAAU,CAAC;AAAA,mBAAM,MAAI,CAACZ,QAAL,CAAc;AAAC8F,cAAAA,UAAU,EAAEJ,SAAS,CAACI;AAAvB,aAAd,CAAN;AAAA,WAAD,EAA0D,GAA1D,CAAV;AACH;AACJ,OAX6C,CAY9C;;;AACA,UAAIJ,SAAS,CAACd,QAAV,IAAsBc,SAAS,CAACd,QAAV,CAAmBD,MAAzC,IAAoDe,SAAS,CAACd,QAAV,CAAmBD,MAAnB,KAA8B,KAAK/E,KAAL,CAAWgF,QAAX,CAAoBD,MAA1G,EAAmH;AAC/GpE,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CkF,SAAS,CAACd,QAAV,CAAmBD,MAA9D,EAAsE,GAAtE,EAA2E,KAAK/E,KAAL,CAAWgF,QAAX,CAAoBD,MAA/F;AACA,aAAK3E,QAAL,CAAc;AAACuB,UAAAA,YAAY,EAAE;AAAf,SAAd;AACA,aAAKkE,WAAL,CAAiBC,SAAS,CAACd,QAAV,CAAmBD,MAApC;AACH;AAEJ;;;qCAEgBoB,G,EAAK/E,I,EAAM;AACxB,UAAIgF,SAAS,GAAG,EAAhB;AACA,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAIC,UAAU,GAAG/E,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAjB;AACA,UAAI+E,YAAY,GAAGhF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAnB;AACA,UAAIF,OAAO,GAAG,EAAd;AACAX,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCuF,GAApC,EAAyC,OAAzC,EAAkD7D,IAAI,CAACC,KAAL,CAAW+D,UAAX,CAAlD,EAA0E,OAAOhE,IAAI,CAACC,KAAL,CAAW+D,UAAX,CAAjF;;AACA,UAAIH,GAAG,CAACtF,KAAR,EAAe;AACX,aAAKb,KAAL,CAAWe,eAAX,CAA2B,OAA3B,EAAoCoF,GAAG,CAACtF,KAAxC;AACH,OAFD,MAEO;AACHsF,QAAAA,GAAG,CAACK,GAAJ,CAAQ,UAACnD,IAAD,EAAOoD,CAAP,EAAa;AACjB,cAAIH,UAAU,IAAIhE,IAAI,CAACC,KAAL,CAAW+D,UAAX,EAAuBjF,MAAzC,EAAiD;AAC7CV,YAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoC0B,IAAI,CAACC,KAAL,CAAW+D,UAAX,EAAuB/C,SAAvB,CAAiC,UAAAC,CAAC;AAAA,qBAAIA,CAAC,IAAIH,IAAI,CAACC,OAAd;AAAA,aAAlC,CAApC,EAD6C,CAE7C;;AACA,gBAAIhB,IAAI,CAACC,KAAL,CAAW+D,UAAX,EAAuB/C,SAAvB,CAAiC,UAAAC,CAAC;AAAA,qBAAIA,CAAC,IAAIH,IAAI,CAACC,OAAd;AAAA,aAAlC,MAA6D,CAAC,CAAlE,EAAqE+C,QAAQ,CAAC5C,IAAT,CAAcJ,IAAI,CAACC,OAAnB;AACxE,WAJD,MAIO;AACH8C,YAAAA,SAAS,CAAC3C,IAAV,CAAeJ,IAAI,CAACC,OAApB;AACH;AACJ,SARD;;AAUA,YAAI+C,QAAQ,CAAChF,MAAb,EAAqB;AACjBV,UAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CyF,QAA7C;AACA/D,UAAAA,IAAI,CAACC,KAAL,CAAW+D,UAAX,EAAuBI,MAAvB,CAA8BL,QAA9B;AACH,SAdE,CAiBH;;;AACA,YAAIM,WAAW,GAAG,IAAlB;;AAEA,YAAIL,UAAU,IAAIhE,IAAI,CAACC,KAAL,CAAW+D,UAAX,EAAuBjF,MAAzC,EAAiD;AAC7CsF,UAAAA,WAAW,GAAGrE,IAAI,CAACC,KAAL,CAAW+D,UAAX,CAAd;AACH,SAFD,MAEO,IAAIF,SAAS,CAAC/E,MAAd,EAAsB;AACzBsF,UAAAA,WAAW,GAAGP,SAAd;AACH;;AAED9E,QAAAA,OAAO,GAAIiF,YAAD,GAAiBjE,IAAI,CAACC,KAAL,CAAWgE,YAAX,CAAjB,GAA4C,EAAtD;AACA5F,QAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6C+F,WAAW,CAACtF,MAAzD,EAAiE,GAAjE,EAAsEC,OAAO,CAACD,MAA9E,EAAsF,KAAtF,EAA8FsF,WAAW,CAACtF,MAAZ,GAAqBC,OAAO,CAACD,MAA3H;AACA,aAAKrB,KAAL,CAAW8D,qBAAX,CAAiC6C,WAAW,CAACtF,MAAZ,GAAqBC,OAAO,CAACD,MAA9D;AACAE,QAAAA,YAAY,CAACmC,OAAb,CAAqB,gBAArB,EAAuCpB,IAAI,CAACqB,SAAL,CAAegD,WAAf,CAAvC;AACH;AAGJ;;;gCA8BW;AACR,UAAIC,QAAQ,GAAG,KAAKpE,cAApB;;AACA3C,MAAAA,KAAK,CAACO,QAAN,CAAe;AAACsB,QAAAA,OAAO,EAAEkF;AAAV,OAAf;;AACA,WAAK5G,KAAL,CAAWkB,oBAAX,CAAgC,KAAhC;AACH;;;6BAoEQ;AAAA,wBACqC,KAAK6C,KAD1C;AAAA,UACEC,aADF,eACEA,aADF;AAAA,UACiBC,gBADjB,eACiBA,gBADjB;AAAA,yBAE0B,KAAKF,KAF/B;AAAA,UAEE1D,UAFF,gBAEEA,UAFF;AAAA,UAEcgE,QAFd,gBAEcA,QAFd;AAGL,UAAIwC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAlB;AACA,aACK3C,QAAQ,KAAK,UAAd,GACI,oBAAC,oBAAD;AAAsB,QAAA,IAAI,EAAE,KAAKN,KAAL,CAAWrC,OAAvC;AAAgD,QAAA,WAAW,EAAEmF,WAA7D;AACsB,QAAA,YAAY,EAAE,KAAKpC,YADzC;AACuD,QAAA,UAAU,EAAE,KAAKD,UADxE;AACoF,QAAA,MAAM,EAAE,OAD5F;AAEsB,QAAA,SAAS,EAAE,KAAK7B,SAFtC;AAEiD,QAAA,OAAO,EAAE,KAAKoB,KAAL,CAAWpC,YAFrE;AAGsB,QAAA,mBAAmB,EAAE,KAAKmB,aAHhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,GAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPR;AASH;;;;EA9Q4BpE,KAAK,CAACuI,S;;AAgRtC;;AAED,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACnD,KAAD,EAAW;AAC/B,MAAIM,QAAQ,GAAG,IAAf;AACA,MAAI6B,UAAU,GAAG,IAAjB;;AAEA,MAAInC,KAAK,CAACoD,cAAN,CAAqBC,IAArB,IAA6BrD,KAAK,CAACoD,cAAN,CAAqBC,IAArB,CAA0B/C,QAA3D,EAAqE;AACjEA,IAAAA,QAAQ,GAAGN,KAAK,CAACoD,cAAN,CAAqBC,IAArB,CAA0B/C,QAArC;AACA6B,IAAAA,UAAU,GAAGnC,KAAK,CAACoD,cAAN,CAAqBC,IAArB,CAA0BhG,IAAvC;AACH;;AACD,SAAO;AACHiG,IAAAA,cAAc,EAAGtD,KAAK,CAACsD,cAAP,GAAyBtD,KAAK,CAACsD,cAA/B,GAAgD,IAD7D;AAEHC,IAAAA,YAAY,EAAEvD,KAAK,CAACuD,YAAN,CAAmBC,MAAnB,GAA4BxD,KAAK,CAACuD,YAAN,CAAmBC,MAA/C,GAAwD,IAFnE;AAGHlD,IAAAA,QAAQ,EAAEA,QAHP;AAGiB6B,IAAAA,UAAU,EAAEA;AAH7B,GAAP;AAKH,CAbD;;AAcA,IAAMsB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,QAAD,EAAc;AACnC,SAAO;AACHtC,IAAAA,gBAAgB,EAAE,0BAAC/D,IAAD,EAAU;AACxBqG,MAAAA,QAAQ,CAAClI,OAAO,CAACmI,UAAR,CAAmBtG,IAAnB,CAAD,CAAR;AACH,KAHE;AAIHuG,IAAAA,gBAAgB,EAAE,0BAACvG,IAAD,EAAU;AACxBqG,MAAAA,QAAQ,CAAClI,OAAO,CAACqI,UAAR,CAAmBxG,IAAnB,CAAD,CAAR;AACH,KANE;AAOHgE,IAAAA,qBAAqB,EAAE,+BAAChE,IAAD,EAAU;AAC7BqG,MAAAA,QAAQ,CAAClI,OAAO,CAACsI,eAAR,CAAwBzG,IAAxB,CAAD,CAAR;AACH,KATE;AAUH0G,IAAAA,oBAAoB,EAAE,8BAAC1G,IAAD,EAAU;AAC5BqG,MAAAA,QAAQ,CAAClI,OAAO,CAAC8H,cAAR,CAAuBjG,IAAvB,CAAD,CAAR;AACH,KAZE;AAaHF,IAAAA,oBAAoB,EAAE,8BAACE,IAAD,EAAU;AAC5BqG,MAAAA,QAAQ,CAAClI,OAAO,CAACwI,cAAR,CAAuB3G,IAAvB,CAAD,CAAR;AACH,KAfE;AAgBHL,IAAAA,eAAe,EAAE,yBAACqG,IAAD,EAAOY,GAAP,EAAe;AAC5BP,MAAAA,QAAQ,CAAClI,OAAO,CAAC0I,SAAR,CAAkBb,IAAlB,EAAwBY,GAAxB,CAAD,CAAR;AACH,KAlBE;AAmBHE,IAAAA,YAAY,EAAE,sBAAC9G,IAAD,EAAU;AACpBqG,MAAAA,QAAQ,CAAClI,OAAO,CAAC4I,YAAR,CAAqB/G,IAArB,CAAD,CAAR;AACH,KArBE;AAsBH0C,IAAAA,qBAAqB,EAAE,+BAAC1C,IAAD,EAAU;AAC7BqG,MAAAA,QAAQ,CAAClI,OAAO,CAAC6I,eAAR,CAAwBhH,IAAxB,CAAD,CAAR;AACH;AAxBE,GAAP;AA0BH,CA3BD;;AA6BA,eAAejC,UAAU,CAACG,OAAO,CAAC4H,eAAD,EAAkBM,gBAAlB,CAAP,CAA2CvI,MAAM,CAAC;AAACoJ,EAAAA,aAAa,EAAE;AAAhB,CAAD,CAAN,CAA8BtI,kBAA9B,CAA3C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport {Grid, Image, Header, Menu, Dropdown, Button} from 'semantic-ui-react';\nimport sizeMe from 'react-sizeme';\nimport InstanceListView from '../container/instanceListView';\nimport {withRouter} from 'react-router-dom';\nimport MaterialIcon from 'material-icons-react';\nimport PageDetailViewer from '../container/pageDetailViewer';\n//redux\nimport {connect} from 'react-redux';\nimport * as actions from '../actions';\nimport * as services from '../services/service_audit_api';\nimport './siteThree.css';\nimport TimelineAuditView from \"../container/TimelineAuditView\";\nimport Alert from \"react-s-alert\";\nimport * as reducer from '../utils'\nimport TimelineAuditViewNew from \"../container/TimelineAuditViewNew\";\n\n\nlet _self = null;\nlet rgn = ['US', 'KR', 'EU'];\n\nclass SiteFourPageAudits extends React.Component {\n    constructor(props) {\n        super(props);\n        _self = this;\n        this.state = {\n            shouldShowBox: true,\n            shouldShowCircle: false,\n            contHeight: 0,\n            contWidth: 0,\n            bodyHeight: 0,\n            activeItem: 'Developers',\n            devData: [],\n            viewMode: 'listView',\n            auditMounted: false\n        };\n        this.headerH = 70;\n        this.hgap = 0;\n        this.hiddenKeys = ['Ip_support', 'Num_dynamic_ips', 'Status', 'Physical_name', 'Platform_type'];\n        this.headerLayout = [1, 3, 3, 3, 2, 2, 2];\n        this.userToken = null;\n        this._devData = [];\n        this.loadCount = 0;\n        this._cloudletDummy = [];\n    }\n\n    gotoUrl(site, subPath) {\n        _self.props.history.push({\n            pathname: site,\n            search: subPath\n        });\n        _self.props.history.location.search = subPath;\n\n    }\n\n    //go to\n    gotoPreview(site) {\n        //브라우져 입력창에 주소 기록\n        let mainPath = site;\n        let subPath = 'pg=0';\n        _self.props.history.push({\n            pathname: mainPath,\n            search: subPath,\n            state: {some: 'state'}\n        });\n        _self.props.history.location.search = subPath;\n        _self.props.handleChangeSite({mainPath: mainPath, subPath: subPath})\n\n    }\n\n    handleItemClick = (e, {name}) => this.setState({activeItem: name})\n\n    onHandleRegistry() {\n        this.props.handleInjectDeveloper('userInfo');\n    }\n\n    readyToData(subPaths) {\n        console.log('20191018 subPaths.subPaths...', subPaths, \":\", subPaths.indexOf('&org='))\n        let subPath = '';\n        let subParam = null;\n        if (subPaths.indexOf('&org=') > -1) {\n            let paths = subPaths.split('&')\n            subPath = paths[0];\n            subParam = paths[1];\n        }\n        this.setState({devData: []})\n        this.setState({page: subPath, OrganizationName: subParam})\n        this.props.handleLoadingSpinner(true);\n        // get audits data\n        this.getDataAudit(subParam);\n    }\n\n\n    componentWillMount() {\n        this.setState({bodyHeight: (window.innerHeight - this.headerH)})\n        this.setState({contHeight: (window.innerHeight - this.headerH) / 2 - this.hgap})\n    }\n\n    componentDidMount() {\n\n        if (this.props.location && this.props.location.search) {\n            this.readyToData(this.props.location.search)\n\n        }\n    }\n\n    componentWillUnmount() {\n        this._devData = [];\n        this._cloudletDummy = [];\n\n    }\n\n\n    componentWillReceiveProps(nextProps, nextContext) {\n\n        this.setState({bodyHeight: (window.innerHeight - this.headerH)})\n        this.setState({contHeight: (nextProps.size.height - this.headerH) / 2 - this.hgap})\n        if (nextProps.viewMode) {\n            if (nextProps.viewMode === 'listView') {\n                this.setState({viewMode: nextProps.viewMode})\n            } else {\n                this.setState({viewMode: nextProps.viewMode})\n                setTimeout(() => this.setState({detailData: nextProps.detailData}), 300)\n            }\n        }\n        //\n        if (nextProps.location && nextProps.location.search && (nextProps.location.search !== this.props.location.search)) {\n            console.log('20191018 nextProps.props...', nextProps.location.search, \":\", this.props.location.search)\n            this.setState({auditMounted: true})\n            this.readyToData(nextProps.location.search);\n        }\n\n    }\n\n    reduceAuditCount(all, data) {\n        let itemArray = [];\n        let addArray = [];\n        let savedArray = localStorage.getItem('auditUnChecked');\n        let checkedArray = localStorage.getItem('auditChecked');\n        let checked = [];\n        console.log('20191105 item is -- ', all, \"  :  \", JSON.parse(savedArray), typeof JSON.parse(savedArray))\n        if (all.error) {\n            this.props.handleAlertInfo('error', all.error)\n        } else {\n            all.map((item, i) => {\n                if (savedArray && JSON.parse(savedArray).length) {\n                    console.log('20191022 item is -- ', JSON.parse(savedArray).findIndex(k => k == item.traceid))\n                    //이전에 없던 데이터 이면 추가하기\n                    if (JSON.parse(savedArray).findIndex(k => k == item.traceid) === -1) addArray.push(item.traceid)\n                } else {\n                    itemArray.push(item.traceid)\n                }\n            })\n\n            if (addArray.length) {\n                console.log('20191022 if has new data ... ', addArray)\n                JSON.parse(savedArray).concat(addArray);\n            }\n\n\n            // 이제 새로운 데이터에서 체크된 오딧은 제거\n            let checkResult = null;\n\n            if (savedArray && JSON.parse(savedArray).length) {\n                checkResult = JSON.parse(savedArray);\n            } else if (itemArray.length) {\n                checkResult = itemArray;\n            }\n\n            checked = (checkedArray) ? JSON.parse(checkedArray) : [];\n            console.log('20191022  unchecked... is -- ', checkResult.length, \":\", checked.length, \" - \", (checkResult.length - checked.length))\n            this.props.handleAuditCheckCount(checkResult.length - checked.length)\n            localStorage.setItem('auditUnChecked', JSON.stringify(checkResult))\n        }\n\n\n    }\n\n    receiveResult = (result, resource, self, body) => {\n        // @inki if data has expired token\n        console.log('20191106 receive result...', result, \":\", resource)\n        if (result.error && result.error.indexOf('Expired') > -1) {\n            _self.props.handleAlertInfo('error', result.error);\n            setTimeout(() => _self.gotoUrl('/logout'), 4000);\n            _self.props.handleLoadingSpinner(false);\n            return;\n        } else if (result.error) {\n            _self.props.handleAlertInfo('error', result.error);\n        }\n\n        let unchecked = result.data.length;\n        let checked = localStorage.getItem('auditChecked')\n        if (resource === 'ShowSelf' || resource === 'ShowOrg') {\n            console.log('20191106 audit result..', result, \":\", resource, \": unchecked : \", unchecked)\n            _self.reduceAuditCount(result.data, checked)\n\n        }\n        _self.setState({devData: result, auditMounted: true})\n        _self.props.handleLoadingSpinner(false);\n        if (rgn.length == this.loadCount - 1) {\n            return\n        }\n\n\n    }\n\n    countJoin() {\n        let cloudlet = this._cloudletDummy;\n        _self.setState({devData: cloudlet})\n        this.props.handleLoadingSpinner(false);\n    }\n\n    makeOga = (logName) => {\n        let lastSub = logName.substring(logName.lastIndexOf('=') + 1);\n        return lastSub\n    }\n    getDataAudit = async (orgName) => {\n         this.props.handleLoadingSpinner(true);\n        let store = localStorage.PROJECT_INIT ? JSON.parse(localStorage.PROJECT_INIT) : null\n        this.setState({devData: []})\n        this._cloudletDummy = [];\n        _self.loadCount = 0;\n\n        if (orgName) {\n            services.showAuditOrg('ShowOrg',{token:store.userToken, params:{\"org\":_self.makeOga(orgName)}}, _self.receiveResult, _self)\n           /* try {\n                let response = services.showAuditOrg2('ShowOrg', {\n                    token: store.userToken,\n                    params: {\"org\": _self.makeOga(orgName)}\n                })\n                this.receiveResult(response, 'ShowOrg')\n            } catch (e) {\n                //alert(e)\n                this.props.handleLoadingSpinner(false);\n            }*/\n\n        } else {\n            services.showAuditSelf('ShowSelf', {token: store.userToken, params: '{}'}, _self.receiveResult, _self)\n        }\n    }\n    selectedAudit = (selectedAudit) => {\n        // if get same item find from storage should remove it.\n        let savedData = localStorage.getItem('auditUnChecked');\n        let checkData = localStorage.getItem('auditChecked');\n        let newCheckData = null;\n        let newData = null;\n        if (savedData) {\n            let parseSavedData = JSON.parse(savedData)\n            newData = parseSavedData.filter(function (item) {\n                return item !== selectedAudit.traceid\n            })\n            newCheckData = JSON.parse(checkData);\n\n            if (newCheckData) {\n                //만약 이미 체크된 오딧 이면 배열에 넣지 않는다\n                if (newCheckData.findIndex(k => k == selectedAudit.traceid) === -1) {\n                    newCheckData.push(selectedAudit.traceid)\n                } else {\n\n                }\n\n            } else {\n                newCheckData = [selectedAudit.traceid]\n            }\n            console.log('20191022 newData // newCheckData ...', newCheckData, \":\", typeof newCheckData)\n\n\n        }\n        //console.log('20191022 filtering audit checked ...', newData, \":\", newData.length)\n        localStorage.setItem('auditChecked', JSON.stringify(newCheckData))\n\n        //refresh number badge of Audit Log button\n        let allCnt = JSON.parse(savedData).length;\n        let selectedCnt = newCheckData.length;\n        if (newData && newData.length) _self.props.handleAuditCheckCount(allCnt - selectedCnt)\n\n    }\n\n    render() {\n        const {shouldShowBox, shouldShowCircle} = this.state;\n        const {activeItem, viewMode} = this.state;\n        let randomValue = Math.round(Math.random() * 100);\n        return (\n            (viewMode === 'listView') ?\n                <TimelineAuditViewNew data={this.state.devData} randomValue={randomValue}\n                                      headerLayout={this.headerLayout} hiddenKeys={this.hiddenKeys} siteId={'Audit'}\n                                      userToken={this.userToken} mounted={this.state.auditMounted}\n                                      handleSelectedAudit={this.selectedAudit}></TimelineAuditViewNew>\n                :\n                <div></div>\n        );\n    }\n\n};\n\nconst mapStateToProps = (state) => {\n    let viewMode = null;\n    let detailData = null;\n\n    if (state.changeViewMode.mode && state.changeViewMode.mode.viewMode) {\n        viewMode = state.changeViewMode.mode.viewMode;\n        detailData = state.changeViewMode.mode.data;\n    }\n    return {\n        computeRefresh: (state.computeRefresh) ? state.computeRefresh : null,\n        changeRegion: state.changeRegion.region ? state.changeRegion.region : null,\n        viewMode: viewMode, detailData: detailData\n    }\n};\nconst mapDispatchProps = (dispatch) => {\n    return {\n        handleChangeSite: (data) => {\n            dispatch(actions.changeSite(data))\n        },\n        handleInjectData: (data) => {\n            dispatch(actions.injectData(data))\n        },\n        handleInjectDeveloper: (data) => {\n            dispatch(actions.registDeveloper(data))\n        },\n        handleComputeRefresh: (data) => {\n            dispatch(actions.computeRefresh(data))\n        },\n        handleLoadingSpinner: (data) => {\n            dispatch(actions.loadingSpinner(data))\n        },\n        handleAlertInfo: (mode, msg) => {\n            dispatch(actions.alertInfo(mode, msg))\n        },\n        handleDetail: (data) => {\n            dispatch(actions.changeDetail(data))\n        },\n        handleAuditCheckCount: (data) => {\n            dispatch(actions.setCheckedAudit(data))\n        }\n    };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchProps)(sizeMe({monitorHeight: true})(SiteFourPageAudits)));\n"]},"metadata":{},"sourceType":"module"}